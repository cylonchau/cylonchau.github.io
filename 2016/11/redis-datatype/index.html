<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>redisæ•°æ®ç±»å‹ | Cylon&#39;s Collection</title>
<meta name="keywords" content="redis">
<meta name="description" content="redisæ•°æ®ç±»å‹ - Cylon&#39;s Collection">
<meta name="author" content="cylon">
<link rel="canonical" href="https://www.oomkill.com/2016/11/redis-datatype/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.41a8706089174fae1769fc26da4d1d354fa88083db604a95688ff58852dd9006.css" integrity="sha256-QahwYIkXT64Xafwm2k0dNU&#43;ogIPbYEqVaI/1iFLdkAY=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://www.oomkill.com/favicon.ico">
<link rel="apple-touch-icon" href="https://www.oomkill.com/apple-touch-icon.png">

<meta name="twitter:title" content="redisæ•°æ®ç±»å‹ | Cylon&#39;s Collection" />
<meta name="twitter:description" content="" />
<meta property="og:title" content="redisæ•°æ®ç±»å‹ | Cylon&#39;s Collection" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.oomkill.com/2016/11/redis-datatype/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2016-11-23T00:00:00&#43;00:00" />
  <meta property="article:modified_time" content="2022-12-14T23:00:36&#43;08:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://www.oomkill.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "redisæ•°æ®ç±»å‹",
      "item": "https://www.oomkill.com/2016/11/redis-datatype/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "redisæ•°æ®ç±»å‹ | Cylon's Collection",
  "name": "redisæ•°æ®ç±»å‹",
  "description": "",
  "keywords": [
    "redis"
  ],
  "wordCount" : "7582",
  "inLanguage": "zh",
  "datePublished": "2016-11-23T00:00:00Z",
  "dateModified": "2022-12-14T23:00:36+08:00",
  "author":{
    "@type": "Person",
    "name": "cylon"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.oomkill.com/2016/11/redis-datatype/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Cylon's Collection",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.oomkill.com/favicon.ico"
    }
  }
}
</script><script type="text/javascript"
        async
        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});

MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
</style>
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary-bg: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list-page {
                background: var(--theme);
            }

            .list-page:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list-page:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

</head>

<body class=" type-posts kind-page layout-" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'auto';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.oomkill.com" accesskey="h" title="Cylon&#39;s Collection (Alt + H)">Cylon&#39;s Collection</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.oomkill.com/archives/" title="å½’æ¡£"
                >å½’æ¡£
                </a>
            </li>
            <li>
                <a href="https://www.oomkill.com/tags/" title="æ ‡ç­¾"
                >æ ‡ç­¾
                </a>
            </li>
            <li>
                <a href="https://www.oomkill.com/search/" title="æœç´¢ (Alt &#43; /)"data-no-instant accesskey=/
                >æœç´¢
                </a>
            </li>
            <li>
                <a href="https://www.oomkill.com/about/" title="å…³äº"
                >å…³äº
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header"><h1 class="post-title">redisæ•°æ®ç±»å‹</h1>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>2016-11-23</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>Edited on 2022-12-14</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="https://www.oomkill.com/tags/databases/">databases</a></span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="12" cy="12" r="9"></circle><polyline points="12 7 12 12 15 15"></polyline></svg>
  <span>16 åˆ†é’Ÿ</span></span>

      
      
    </div>
  </header> <div class="toc side right">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">ç›®å½•</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#keyvalue%e4%bb%8b%e7%bb%8d" aria-label="key/valueä»‹ç»">key/valueä»‹ç»</a></li>
                <li>
                    <a href="#%e9%80%9a%e7%94%a8%e6%93%8d%e4%bd%9c" aria-label="é€šç”¨æ“ä½œ">é€šç”¨æ“ä½œ</a><ul>
                        
                <li>
                    <a href="#%e6%89%be%e5%88%b0%e5%85%a8%e9%83%a8%e7%bb%99%e5%ae%9a%e6%a8%a1%e5%bc%8f%e7%9a%84%e5%8c%b9%e9%85%8d%e5%88%b0%e7%9a%84key" aria-label="æ‰¾åˆ°å…¨éƒ¨ç»™å®šæ¨¡å¼çš„åŒ¹é…åˆ°çš„key">æ‰¾åˆ°å…¨éƒ¨ç»™å®šæ¨¡å¼çš„åŒ¹é…åˆ°çš„key</a></li>
                <li>
                    <a href="#randomkey%e8%bf%94%e5%9b%9e%e9%9a%8f%e6%9c%bakey" aria-label="randomkeyè¿”å›éšæœºkey">randomkeyè¿”å›éšæœºkey</a></li>
                <li>
                    <a href="#exists%e6%a3%80%e6%9f%a5key%e6%98%af%e5%90%a6%e5%ad%98%e5%9c%a8" aria-label="existsæ£€æŸ¥keyæ˜¯å¦å­˜åœ¨">existsæ£€æŸ¥keyæ˜¯å¦å­˜åœ¨</a></li>
                <li>
                    <a href="#type-%e6%9f%a5%e7%9c%8bkey%e7%b1%bb%e5%9e%8b" aria-label="type æŸ¥çœ‹keyç±»å‹">type æŸ¥çœ‹keyç±»å‹</a></li>
                <li>
                    <a href="#%e4%bf%ae%e6%94%b9key%e5%90%8d%e7%a7%b0" aria-label="ä¿®æ”¹keyåç§°">ä¿®æ”¹keyåç§°</a></li>
                <li>
                    <a href="#%e5%b0%86%e5%bd%93%e5%89%8d%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84-key-%e7%a7%bb%e5%8a%a8%e5%88%b0%e7%bb%99%e5%ae%9a%e7%9a%84%e6%95%b0%e6%8d%ae%e5%ba%93db%e5%bd%93%e4%b8%ad" aria-label="å°†å½“å‰æ•°æ®åº“çš„ key ç§»åŠ¨åˆ°ç»™å®šçš„æ•°æ®åº“dbå½“ä¸­">å°†å½“å‰æ•°æ®åº“çš„ key ç§»åŠ¨åˆ°ç»™å®šçš„æ•°æ®åº“dbå½“ä¸­</a></li>
                <li>
                    <a href="#dbsize%e8%bf%94%e5%9b%9e%e5%bd%93%e5%89%8d%e9%80%89%e6%8b%a9%e7%9a%84%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84key%e6%95%b0%e9%87%8f" aria-label="dbsizeè¿”å›å½“å‰é€‰æ‹©çš„æ•°æ®åº“çš„keyæ•°é‡">dbsizeè¿”å›å½“å‰é€‰æ‹©çš„æ•°æ®åº“çš„keyæ•°é‡</a></li>
                <li>
                    <a href="#shutdown-%e5%90%8c%e6%ad%a5%e4%bf%9d%e5%ad%98%e6%95%b0%e6%8d%ae%e5%88%b0%e7%a3%81%e7%9b%98%e5%b9%b6%e7%bb%93%e6%9d%9fredis%e8%bf%9b%e7%a8%8b" aria-label="shutdown åŒæ­¥ä¿å­˜æ•°æ®åˆ°ç£ç›˜ï¼Œå¹¶ç»“æŸRedisè¿›ç¨‹">shutdown åŒæ­¥ä¿å­˜æ•°æ®åˆ°ç£ç›˜ï¼Œå¹¶ç»“æŸRedisè¿›ç¨‹</a></li>
                <li>
                    <a href="#%e5%bc%82%e6%ad%a5%e6%93%8d%e4%bd%9credis" aria-label="å¼‚æ­¥æ“ä½œRedis">å¼‚æ­¥æ“ä½œRedis</a></li></ul>
                </li>
                <li>
                    <a href="#string%e5%ad%97%e7%ac%a6%e4%b8%b2%e7%b1%bb%e5%9e%8b" aria-label="Stringå­—ç¬¦ä¸²ç±»å‹">Stringå­—ç¬¦ä¸²ç±»å‹</a><ul>
                        
                <li>
                    <a href="#%e5%b8%b8%e8%a7%84%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%93%8d%e4%bd%9c" aria-label="å¸¸è§„å­—ç¬¦ä¸²æ“ä½œ">å¸¸è§„å­—ç¬¦ä¸²æ“ä½œ</a></li>
                <li>
                    <a href="#string%e7%b1%bb%e5%9e%8b%e5%8f%af%e4%bb%a5%e7%94%a8%e6%9d%a5%e5%ad%98%e5%82%a8%e6%95%b0%e5%ad%97" aria-label="Stringç±»å‹å¯ä»¥ç”¨æ¥å­˜å‚¨æ•°å­—">Stringç±»å‹å¯ä»¥ç”¨æ¥å­˜å‚¨æ•°å­—</a></li>
                <li>
                    <a href="#%e4%b8%bakey%e8%ae%be%e7%bd%ae%e6%96%b0%e5%80%bc%e5%b9%b6%e4%b8%94%e8%bf%94%e5%9b%9e%e5%8e%9f%e5%80%bc" aria-label="ä¸ºkeyè®¾ç½®æ–°å€¼å¹¶ä¸”è¿”å›åŸå€¼">ä¸ºkeyè®¾ç½®æ–°å€¼å¹¶ä¸”è¿”å›åŸå€¼</a></li>
                <li>
                    <a href="#setbit-getbit-bitcount-binop" aria-label="setbit getbit bitcount binop">setbit getbit bitcount binop</a></li></ul>
                </li>
                <li>
                    <a href="#list%e7%b1%bb%e5%9e%8b" aria-label="Listç±»å‹">Listç±»å‹</a><ul>
                        
                <li>
                    <a href="#%e5%88%9b%e5%bb%balist%e5%b9%b6%e6%8f%92%e5%85%a5%e6%95%b0%e6%8d%ae" aria-label="åˆ›å»ºlistå¹¶æ’å…¥æ•°æ®">åˆ›å»ºlistå¹¶æ’å…¥æ•°æ®</a></li>
                <li>
                    <a href="#list%e5%ba%94%e7%94%a8%e5%9c%ba%e6%99%af" aria-label="liståº”ç”¨åœºæ™¯">liståº”ç”¨åœºæ™¯</a></li>
                <li>
                    <a href="#%e5%88%a0%e9%99%a4list%e5%86%85%e5%85%83%e7%b4%a0" aria-label="åˆ é™¤listå†…å…ƒç´ ">åˆ é™¤listå†…å…ƒç´ </a></li></ul>
                </li>
                <li>
                    <a href="#set%e9%9b%86%e5%90%88" aria-label="seté›†åˆ">seté›†åˆ</a><ul>
                        
                <li>
                    <a href="#%e5%88%9b%e5%bb%ba%e5%b9%b6%e5%90%91%e9%9b%86%e5%90%88%e6%8f%92%e5%85%a5%e6%96%b0%e5%85%83%e7%b4%a0" aria-label="åˆ›å»ºå¹¶å‘é›†åˆæ’å…¥æ–°å…ƒç´ ">åˆ›å»ºå¹¶å‘é›†åˆæ’å…¥æ–°å…ƒç´ </a></li>
                <li>
                    <a href="#%e5%88%a0%e9%99%a4%e9%9b%86%e5%90%88%e4%b8%ad%e5%85%83%e7%b4%a0" aria-label="åˆ é™¤é›†åˆä¸­å…ƒç´ ">åˆ é™¤é›†åˆä¸­å…ƒç´ </a></li>
                <li>
                    <a href="#%e6%9f%a5%e7%9c%8b%e9%9b%86%e5%90%88%e5%86%85%e5%85%83%e7%b4%a0" aria-label="æŸ¥çœ‹é›†åˆå†…å…ƒç´ ">æŸ¥çœ‹é›†åˆå†…å…ƒç´ </a></li>
                <li>
                    <a href="#%e7%a7%bb%e5%8a%a8%e9%9b%86%e5%90%88%e5%86%85%e5%85%83%e7%b4%a0" aria-label="ç§»åŠ¨é›†åˆå†…å…ƒç´ ">ç§»åŠ¨é›†åˆå†…å…ƒç´ </a></li>
                <li>
                    <a href="#%e9%9b%86%e5%90%88%e8%ae%a1%e7%ae%97" aria-label="é›†åˆè®¡ç®—">é›†åˆè®¡ç®—</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%9c%89%e5%ba%8f%e9%9b%86%e5%90%88" aria-label="æœ‰åºé›†åˆ">æœ‰åºé›†åˆ</a><ul>
                        
                <li>
                    <a href="#%e6%b7%bb%e5%8a%a0%e5%b9%b6%e6%9f%a5%e7%9c%8b%e6%9c%89%e5%ba%8f%e9%9b%86%e5%90%88" aria-label="æ·»åŠ å¹¶æŸ¥çœ‹æœ‰åºé›†åˆ">æ·»åŠ å¹¶æŸ¥çœ‹æœ‰åºé›†åˆ</a></li>
                <li>
                    <a href="#%e5%af%b9%e9%9b%86%e5%90%88%e7%9a%84%e5%80%bc%e6%8e%92%e5%ba%8f" aria-label="å¯¹é›†åˆçš„å€¼æ’åº">å¯¹é›†åˆçš„å€¼æ’åº</a></li>
                <li>
                    <a href="#%e6%9f%a5%e7%9c%8b%e9%9b%86%e5%90%88%e4%b8%ad%e7%9a%84%e5%85%83%e7%b4%a0%e4%b8%aa%e6%95%b0" aria-label="æŸ¥çœ‹é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°">æŸ¥çœ‹é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°</a></li>
                <li>
                    <a href="#%e6%9f%a5%e6%89%be%e9%9b%86%e5%90%88%e5%8c%ba%e9%97%b4%e7%9a%84%e5%85%83%e7%b4%a0" aria-label="æŸ¥æ‰¾é›†åˆåŒºé—´çš„å…ƒç´ ">æŸ¥æ‰¾é›†åˆåŒºé—´çš„å…ƒç´ </a></li>
                <li>
                    <a href="#%e8%ae%a1%e7%ae%97%e4%ba%a4%e5%b9%b6%e9%9b%86" aria-label="è®¡ç®—äº¤å¹¶é›†">è®¡ç®—äº¤å¹¶é›†</a></li></ul>
                </li>
                <li>
                    <a href="#hash" aria-label="hash">hash</a><ul>
                        
                <li>
                    <a href="#%e8%ae%be%e7%bd%aekey%e4%b8%ad%e7%9a%84%e5%9f%9f%e4%b8%8e%e5%80%bc" aria-label="è®¾ç½®keyä¸­çš„åŸŸä¸å€¼">è®¾ç½®keyä¸­çš„åŸŸä¸å€¼</a></li>
                <li>
                    <a href="#%e8%8e%b7%e5%be%97key%e4%b8%ad%e7%9a%84%e5%9f%9f%e5%92%8c%e5%80%bc" aria-label="è·å¾—keyä¸­çš„åŸŸå’Œå€¼">è·å¾—keyä¸­çš„åŸŸå’Œå€¼</a></li>
                <li>
                    <a href="#%e5%88%a0%e9%99%a4key" aria-label="åˆ é™¤key">åˆ é™¤key</a></li>
                <li>
                    <a href="#%e6%9f%a5%e7%9c%8b%e5%9f%9f%e4%bf%a1%e6%81%af" aria-label="æŸ¥çœ‹åŸŸä¿¡æ¯">æŸ¥çœ‹åŸŸä¿¡æ¯</a></li>
                <li>
                    <a href="#hash%e7%9a%84%e5%8e%9f%e5%ad%90%e6%93%8d%e4%bd%9c" aria-label="hashçš„åŸå­æ“ä½œ">hashçš„åŸå­æ“ä½œ</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content">
    





<div class="copyrightTopBlock">
    <p>æœ¬æ–‡å‘å¸ƒäº<a href="https://www.oomkill.com/about" target="_blank">Cylonçš„æ”¶è—å†Œ</a>ï¼Œè½¬è½½è¯·è‘—ååŸæ–‡é“¾æ¥~</p>
    <div class="articleSuffix-bg"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 147.78 155.96"> <path d="M10.5,99.81a1.9,1.9,0,0,0-.53-.09,1.66,1.66,0,0,0-1.64,1.65A1.64,1.64,0,0,0,10,103a1.57,1.57,0,0,0,.87-.25l26.76,26.82.45-1.08L11.52,101.91A1.65,1.65,0,0,0,10.5,99.81Zm-.13,2a.57.57,0,0,1-.8,0,.58.58,0,0,1-.17-.41.58.58,0,0,1,.57-.57h0a.57.57,0,0,1,.56.58A.55.55,0,0,1,10.37,101.77Z" style="fill:#c5c9e0"></path><path d="M56.15,117.58H39.06l0-.09a1.65,1.65,0,0,0-1.36-1H37.5a1.65,1.65,0,1,0,1.56,2.19H55.7L92.92,156h41.44v-1.08h-41Zm-18.25.94a.56.56,0,0,1-.79,0,.58.58,0,0,1-.17-.41.57.57,0,0,1,.56-.57h0a.58.58,0,0,1,.57.58A.54.54,0,0,1,37.9,118.52Z" style="fill:#c5c9e0"></path><path d="M23.52,50.32a1.65,1.65,0,0,0,1.55-1.11H55.28l48-48.13h31.06V0H102.85l-48,48.13H25.07a1.64,1.64,0,0,0-2.09-1,1.64,1.64,0,0,0,.54,3.2Zm0-2.21a.57.57,0,0,1,0,1.13.57.57,0,1,1,0-1.13Z" style="fill:#c5c9e0"></path><polygon points="102.86 0 102.86 0 102.86 0 102.86 0" style="fill:#c5c9e0"></polygon><path d="M107.72,12.14h26.64V11.07H107.27L57.4,61H3.09a1.66,1.66,0,0,0-1.45-.86H1.52A1.65,1.65,0,1,0,2.81,63a1.59,1.59,0,0,0,.45-.87H57.85ZM2.05,62.23a.57.57,0,0,1-.8,0,.58.58,0,0,1-.17-.41.57.57,0,0,1,.56-.57h.09a.57.57,0,0,1,.32,1Z" style="fill:#c5c9e0"></path><path d="M134.36,43.22V42.14h-22.3l-9.62,9.63a1.64,1.64,0,0,0-2.19.77,1.61,1.61,0,0,0-.17.71,1.65,1.65,0,1,0,3.29,0,1.61,1.61,0,0,0-.16-.72l9.3-9.32Zm-32.64,10.6a.57.57,0,0,1,0-1.13.57.57,0,0,1,0,1.13Z" style="fill:#c5c9e0"></path><path d="M147,52.3l-9,9H111.48a1.64,1.64,0,0,0-1.61-1.33h-.14a1.65,1.65,0,1,0,1.6,2.41h27.19l9.26-9.29L147,52.3Zm-37.15,9.85a.56.56,0,0,1-.56-.57h0a.56.56,0,0,1,.56-.56h0a.57.57,0,1,1,0,1.13Z" style="fill:#c5c9e0"></path><path d="M66.79,75.35l11,11.06h56.53V85.33H78.27l-11-11.06H49.49L37.12,86.67a1.64,1.64,0,0,0-2.09,1,1.61,1.61,0,0,0-.09.54,1.65,1.65,0,0,0,3.29,0,1.68,1.68,0,0,0-.26-.89l12-12ZM36.58,88.79a.57.57,0,1,1,.57-.56A.57.57,0,0,1,36.58,88.79Z" style="fill:#c5c9e0"></path><path d="M110.61,95.55,92.8,113.4a1.62,1.62,0,1,0,.77.76l17.49-17.53h23.31V95.55ZM92.49,115.28a.56.56,0,0,1-.8,0,.58.58,0,0,1-.17-.41.57.57,0,0,1,.57-.57h0a.58.58,0,0,1,.56.58A.55.55,0,0,1,92.49,115.28Z" style="fill:#c5c9e0"></path><path d="M97.89,122.3H76.62L64.2,109.85a1.65,1.65,0,0,0-.77-2.2,1.77,1.77,0,0,0-.72-.17h-.14a1.65,1.65,0,0,0,.15,3.29,1.58,1.58,0,0,0,.71-.17l12.74,12.77H98.34l17.48-17.52h18.54v-1.08h-19ZM63.12,109.53a.56.56,0,0,1-.8,0,.58.58,0,0,1-.17-.41.57.57,0,0,1,1.14,0A.54.54,0,0,1,63.12,109.53Z" style="fill:#c5c9e0"></path> </svg> </div>
</div>
<br><h2 id="keyvalueä»‹ç»">key/valueä»‹ç»<a hidden class="anchor" aria-hidden="true" href="#keyvalueä»‹ç»">Â¶</a></h2>
<p>Redis keyå€¼æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ï¼Œè¿™æ„å‘³ç€å¯ä»¥ç”¨ä»»ä½•äºŒè¿›åˆ¶åºåˆ—ä½œä¸ºkeyå€¼ï¼Œä»å½¢å¦‚â€œ0fooâ€çš„ç®€å•å­—ç¬¦ä¸²åˆ°ä¸€ä¸ªJPGæ–‡ä»¶çš„å†…å®¹éƒ½å¯ä»¥ã€‚ç©ºå­—ç¬¦ä¸²ä¹Ÿæ˜¯æœ‰æ•ˆkeyå€¼ã€‚</p>
<p><em><strong>å…³äºkeyçš„å‡ æ¡è§„åˆ™</strong></em>ï¼š</p>
<p>å¤ªé•¿çš„é”®å€¼ï¼Œä¾‹å¦‚1024å­—èŠ‚çš„é”®å€¼ï¼Œä¸ä»…å› ä¸ºæ¶ˆè€—å†…å­˜ï¼Œè€Œä¸”åœ¨æ•°æ®ä¸­æŸ¥æ‰¾è¿™ç±»é”®å€¼çš„è®¡ç®—æˆæœ¬å¾ˆé«˜ã€‚</p>
<p>å¤ªçŸ­çš„é”®å€¼ï¼Œå¦‚æœä½ è¦ç”¨ <font color="#f8070d" size=3><code>u:1000:pwd</code></font>æ¥ä»£æ›¿<font color="#f8070d" size=3><code>user:1000:password</code></font>ï¼Œè¿™æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†åè€…æ›´æ˜“é˜…è¯»ï¼Œå¹¶ä¸”ç”±æ­¤å¢åŠ çš„ç©ºé—´æ¶ˆè€—ç›¸å¯¹äºkey objectå’Œvalue objectæœ¬èº«æ¥è¯´å¾ˆå°.å½“ç„¶ï¼Œæ²¡äººé˜»æ­¢æ‚¨ä¸€å®šè¦ç”¨æ›´çŸ­çš„é”®å€¼èŠ‚çœä¸€ä¸ç‚¹ç©ºé—´ã€‚</p>
<p><font style="background:#bafe01;" size=2>æœ€å¥½åšæŒä¸€ç§æ¨¡å¼;</font>ã€‚ä¾‹å¦‚ï¼š<font color="#f8070d" size=2><code>object-typeğŸ†”field</code></font>å°±æ˜¯ä¸ªä¸é”™çš„æ³¨æ„ï¼Œåƒè¿™æ ·<font color="#f8070d" size=2><code>user:1000:password</code></font>ã€‚æˆ‘å–œæ¬¢å¯¹å¤šå•è¯çš„å­—æ®µåä¸­åŠ ä¸Šä¸€ä¸ªç‚¹ï¼Œå°±åƒè¿™æ ·ï¼š<font color="#f8070d" size=2><code>comment.1234.renlv_to</code></font></p>
<p>keyå»ºè®®ï¼š<font color="#f8070d" size=3><code>object-typeğŸ†”field</code></font> <font style="background:#bafe01;" size=2>é•¿åº¦10-20</font></p>
<p>valueå»ºè®®ï¼š<font style="background:#bafe01;" size=2>stringä¸è¦è¶…è¿‡2K set sortedsetå…ƒç´ ä¸è¦è¶…è¿‡5000</font></p>
<pre><code class="language-bash">$ redis-cli set user_list:user_id:5 zhangsan
OK
$ redis-cli get user_list:user_id:5
&quot;zhangsan&quot;
</code></pre>
<h2 id="é€šç”¨æ“ä½œ">é€šç”¨æ“ä½œ<a hidden class="anchor" aria-hidden="true" href="#é€šç”¨æ“ä½œ">Â¶</a></h2>
<h3 id="æ‰¾åˆ°å…¨éƒ¨ç»™å®šæ¨¡å¼çš„åŒ¹é…åˆ°çš„key">æ‰¾åˆ°å…¨éƒ¨ç»™å®šæ¨¡å¼çš„åŒ¹é…åˆ°çš„key<a hidden class="anchor" aria-hidden="true" href="#æ‰¾åˆ°å…¨éƒ¨ç»™å®šæ¨¡å¼çš„åŒ¹é…åˆ°çš„key">Â¶</a></h3>
<pre><code class="language-bash">127.0.0.1:6379&gt; keys * #&lt;==æ‰“å°å…¨éƒ¨key
1) &quot;name&quot;
2) &quot;site&quot;
127.0.0.1:6379&gt; keys na[ma]e #&lt;==è¿”å›æ­£åˆ™åŒ¹é…åˆ°çš„key
1) &quot;name&quot;
127.0.0.1:6379&gt; keys nam?
1) &quot;name&quot;
</code></pre>
<h3 id="randomkeyè¿”å›éšæœºkey">randomkeyè¿”å›éšæœºkey<a hidden class="anchor" aria-hidden="true" href="#randomkeyè¿”å›éšæœºkey">Â¶</a></h3>
<pre><code class="language-bash">127.0.0.1:6379&gt; randomkey
&quot;name&quot;
127.0.0.1:6379&gt; randomkey
&quot;site&quot;
</code></pre>
<h3 id="existsæ£€æŸ¥keyæ˜¯å¦å­˜åœ¨">existsæ£€æŸ¥keyæ˜¯å¦å­˜åœ¨<a hidden class="anchor" aria-hidden="true" href="#existsæ£€æŸ¥keyæ˜¯å¦å­˜åœ¨">Â¶</a></h3>
<pre><code class="language-bash">127.0.0.1:6379&gt; exists site
(integer) 1
127.0.0.1:6379&gt; exists sites
(integer) 0
</code></pre>
<h3 id="type-æŸ¥çœ‹keyç±»å‹">type æŸ¥çœ‹keyç±»å‹<a hidden class="anchor" aria-hidden="true" href="#type-æŸ¥çœ‹keyç±»å‹">Â¶</a></h3>
<pre><code class="language-bash">127.0.0.1:6379&gt; type set
set
127.0.0.1:6379&gt; type site
string
</code></pre>
<h3 id="ä¿®æ”¹keyåç§°">ä¿®æ”¹keyåç§°<a hidden class="anchor" aria-hidden="true" href="#ä¿®æ”¹keyåç§°">Â¶</a></h3>
<pre><code class="language-bash">127.0.0.1:6379&gt; rename site web 
OK
127.0.0.1:6379&gt; keys *
1) &quot;set&quot;
2) &quot;web&quot;
3) &quot;name&quot;
4) &quot;test&quot;
</code></pre>
<blockquote>
<p><strong>renamnx rename not exists,å½“è¦ä¿®æ”¹çš„æ–°åç§°å­˜åœ¨,ä¼šç”¨æ”¹ååçš„è¦†ç›–å­˜åœ¨çš„é‚£ä¸ªkey</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; set rename_test test
OK
127.0.0.1:6379&gt; set rename_test1 test1
OK
127.0.0.1:6379&gt; set tmp tmp
OK
127.0.0.1:6379&gt; rename rename_test tmp
OK
127.0.0.1:6379&gt; keys *
1) &quot;tmp&quot;
2) &quot;rename_test1&quot;
127.0.0.1:6379&gt; get tmp
&quot;test&quot; #&lt;==å¯ä»¥çœ‹åˆ°tmpæŠŠrename_testç»™è¦†ç›–äº†
</code></pre>
<h3 id="å°†å½“å‰æ•°æ®åº“çš„-key-ç§»åŠ¨åˆ°ç»™å®šçš„æ•°æ®åº“dbå½“ä¸­">å°†å½“å‰æ•°æ®åº“çš„ key ç§»åŠ¨åˆ°ç»™å®šçš„æ•°æ®åº“dbå½“ä¸­<a hidden class="anchor" aria-hidden="true" href="#å°†å½“å‰æ•°æ®åº“çš„-key-ç§»åŠ¨åˆ°ç»™å®šçš„æ•°æ®åº“dbå½“ä¸­">Â¶</a></h3>
<pre><code class="language-bash">127.0.0.1:6379&gt; select 2
OK
127.0.0.1:6379[2]&gt; keys *
(empty list or set)
127.0.0.1:6379[2]&gt; select 0
OK
127.0.0.1:6379&gt; move web 2
(integer) 1
127.0.0.1:6379&gt; select 2
OK
127.0.0.1:6379[2]&gt; keys *
1)&quot;web&quot;
</code></pre>
<h3 id="dbsizeè¿”å›å½“å‰é€‰æ‹©çš„æ•°æ®åº“çš„keyæ•°é‡">dbsizeè¿”å›å½“å‰é€‰æ‹©çš„æ•°æ®åº“çš„keyæ•°é‡<a hidden class="anchor" aria-hidden="true" href="#dbsizeè¿”å›å½“å‰é€‰æ‹©çš„æ•°æ®åº“çš„keyæ•°é‡">Â¶</a></h3>
<pre><code class="language-bash">127.0.0.1:6379&gt; dbsize
(integer) 1
</code></pre>
<h3 id="shutdown-åŒæ­¥ä¿å­˜æ•°æ®åˆ°ç£ç›˜å¹¶ç»“æŸredisè¿›ç¨‹">shutdown åŒæ­¥ä¿å­˜æ•°æ®åˆ°ç£ç›˜ï¼Œå¹¶ç»“æŸRedisè¿›ç¨‹<a hidden class="anchor" aria-hidden="true" href="#shutdown-åŒæ­¥ä¿å­˜æ•°æ®åˆ°ç£ç›˜å¹¶ç»“æŸredisè¿›ç¨‹">Â¶</a></h3>
<p>è¯­æ³•ï¼šshutdown [NOSAVE|SAVE]</p>
<pre><code class="language-bash">redis-cli shutdown save
12632:M 22 Apr 16:42:23.492 * Saving the final RDB snapshot before exiting.
12632:M 22 Apr 16:42:23.528 * DB saved on disk
12632:M 22 Apr 16:42:23.528 * Removing the pid file.
12632:M 22 Apr 16:42:23.529 # Redis is now ready to exit, bye bye...
</code></pre>
<h3 id="å¼‚æ­¥æ“ä½œredis">å¼‚æ­¥æ“ä½œRedis<a hidden class="anchor" aria-hidden="true" href="#å¼‚æ­¥æ“ä½œredis">Â¶</a></h3>
<p>bgrewriteaof (å¼‚æ­¥é‡å†™aofæ—¥å¿—æ–‡ä»¶)
ä½œç”¨å‡å°‘aofæ–‡ä»¶å¤§å°
BGSAVE(å¼‚æ­¥ä¿å­˜æ•°æ®åˆ°ç£ç›˜)</p>
<h2 id="stringå­—ç¬¦ä¸²ç±»å‹">Stringå­—ç¬¦ä¸²ç±»å‹<a hidden class="anchor" aria-hidden="true" href="#stringå­—ç¬¦ä¸²ç±»å‹">Â¶</a></h2>
<p>è¿™æ˜¯æœ€ç®€å•çš„Redisç±»å‹ã€‚å¦‚æœä½ åªç”¨è¿™ç§ç±»å‹,Rediså°±æ˜¯ä¸€ä¸ªå¯ä»¥æŒä¹…åŒ–çš„memcachedæœåŠ¡å™¨(æ³¨:memcacheçš„æ•°æ®ä»…ä¿å­˜åœ¨å†…å­˜ä¸­,æœåŠ¡å™¨é‡å¯å,æ•°æ®å°†ä¸¢å¤±)ã€‚</p>
<h3 id="å¸¸è§„å­—ç¬¦ä¸²æ“ä½œ">å¸¸è§„å­—ç¬¦ä¸²æ“ä½œ<a hidden class="anchor" aria-hidden="true" href="#å¸¸è§„å­—ç¬¦ä¸²æ“ä½œ">Â¶</a></h3>
<p>åœ¨Redisä¸­ï¼Œå¸¸ç”¨setè®¾ç½®ä¸€å¯¹key/valueé”®å€¼ï¼Œç„¶åç”¨getæ¥è·å–å­—ç¬¦ä¸²çš„å€¼ã€‚valueå€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å­—ç¬¦ä¸²(åŒ…æ‹¬äºŒè¿›åˆ¶æ•°æ®)ï¼Œä¾‹å¦‚ä½ å¯ä»¥åœ¨ä¸€ä¸ªé”®ä¸‹ä¿å­˜ä¸€ä¸ªjpgå›¾ç‰‡ã€‚ä½†å€¼çš„é•¿åº¦ä¸èƒ½è¶…è¿‡1GBã€‚</p>
<blockquote>
<p><strong>setï¼šè®¾ç½®ä¸€ä¸ªå»ºçš„å­—ç¬¦ä¸²å€¼</strong></p>
</blockquote>
<p>è¯­æ³•ï¼šset key value [EX seconds] [PX milliseconds] [NX|XX]</p>
<pre><code class="language-bash">127.0.0.1:6379&gt; set k1 testğŸ”‘123
OK  
127.0.0.1:6379&gt; ttl k1
(integer) -1 #&lt;==seté»˜è®¤ç”Ÿå‘½å‘¨æœŸä¸ºæ°¸ä¹…æœ‰æ•ˆ
127.0.0.1:6379&gt; set k1 test_key NX #&lt;==è®¾ç½®ä¸€ä¸ªkey,å¦‚æœä¸å­˜åœ¨å°±åˆ›å»ºã€‚
(nil) #&lt;==å› k1å­˜åœ¨æ•…æ²¡æœ‰åˆ›å»º
127.0.0.1:6379&gt; set k2 test_key NX
OK	#&lt;==åä¸ºk2çš„keyä¸å­˜åœ¨æˆåŠŸåˆ›å»º
127.0.0.1:6379&gt; set k2 test EX 100 #&lt;==è®¾ç½®keyçš„ç”Ÿå‘½å‘¨æœŸ pxæ¯«ç§’ exç§’
OK 
127.0.0.1:6379&gt; ttl k2
(integer) 97
</code></pre>
<blockquote>
<p><strong>msetï¼šè®¾ç½®å¤šä¸ªkey value</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; mset key zhangsan ex 100 key1 lisi 
OK
127.0.0.1:6379&gt; keys *
1) &quot;key1&quot;
2) &quot;ex&quot;
3) &quot;key&quot; #&lt;==é€šè¿‡ç»“æœå¯å¾—çŸ¥ msetä¸æ”¯æŒåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸è®¾ç½®ç”Ÿå‘½å‘¨æœŸ
</code></pre>
<blockquote>
<p><strong>setrangeï¼šä»æŒ‡å®šåç§»é‡å¼€å§‹é‡å†™å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; set key test:123
OK
127.0.0.1:6379&gt; setrange key 5 abc
(integer) 8
127.0.0.1:6379&gt; get key
&quot;test:abc&quot;  #&lt;==ä¸å­˜åœ¨çš„åç§»é‡ç”¨\x00å¡«å……
</code></pre>
<blockquote>
<p><strong>appendï¼šå°†å€¼é™„åŠ åˆ°keyä¸­</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; set test a
OK
127.0.0.1:6379&gt; APPEND test bc
(integer) 3
127.0.0.1:6379&gt; get test
&quot;abc&quot;
</code></pre>
<blockquote>
<p><strong>getrangeï¼šGet a substring of the string stored at a key</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; set k test:getrange
OK
127.0.0.1:6379&gt; getrange k 0 3
&quot;test&quot;
127.0.0.1:6379&gt; getrange k 0 100
&quot;test:getrange&quot; #&lt;==å¦‚æœæŒ‡å®šå€¼å¤§äºå­—ç¬¦ä¸²é•¿åº¦è¿”å›åˆ°å­—ç¬¦ä¸²ç»“å°¾å¤„
127.0.0.1:6379&gt; getrange k 100 1000
&quot;&quot; #&lt;==å¦‚æœå¼€å§‹ä½ç½®å¤§äºå­—ç¬¦ä¸²æ€»é•¿åº¦,è¿”å›ç©ºå­—ç¬¦ä¸²
</code></pre>
<h3 id="stringç±»å‹å¯ä»¥ç”¨æ¥å­˜å‚¨æ•°å­—">Stringç±»å‹å¯ä»¥ç”¨æ¥å­˜å‚¨æ•°å­—<a hidden class="anchor" aria-hidden="true" href="#stringç±»å‹å¯ä»¥ç”¨æ¥å­˜å‚¨æ•°å­—">Â¶</a></h3>
<p>è™½ç„¶å­—ç¬¦ä¸²æ˜¯Redisçš„åŸºæœ¬å€¼ç±»å‹,ä½†ä½ ä»ç„¶èƒ½é€šè¿‡å®ƒå®Œæˆä¸€äº›æœ‰è¶£çš„æ“ä½œã€‚ä¾‹å¦‚ï¼šåŸå­é€’å¢ã€‚</p>
<p>INCRå‘½ä»¤å°†å­—ç¬¦ä¸²å€¼è§£ææˆæ•´å‹,å°†å…¶åŠ 1,æœ€åå°†ç»“æœä¿å­˜ä¸ºæ–°çš„å­—ç¬¦ä¸²å€¼,ç±»ä¼¼çš„å‘½ä»¤æœ‰INCRBY, DECR and DECRBYCå®é™…ä¸Šä»–ä»¬åœ¨å†…éƒ¨å°±æ˜¯åŒä¸€ä¸ªå‘½ä»¤,åªæ˜¯çœ‹ä¸Šå»æœ‰ç‚¹å„¿ä¸åŒã€‚</p>
<p>incræ˜¯åŸå­æ“ä½œæ„å‘³ç€ä»€ä¹ˆå‘¢?å°±æ˜¯è¯´å³ä½¿å¤šä¸ªå®¢æˆ·ç«¯å¯¹åŒä¸€ä¸ªkeyå‘å‡ºINCRå‘½ä»¤,ä¹Ÿå†³ä¸ä¼šå¯¼è‡´ç«Ÿäº‰çš„æƒ…å†µ.ä¾‹å¦‚å¦‚ä¸‹æƒ…å†µæ°¸è¿œä¸å¯èƒ½å‘ç”Ÿ:ã€Œå®¢æˆ·ç«¯1å’Œå®¢æˆ·ç«¯2åŒæ—¶è¯»å‡ºâ€œ10&quot;,ä»–ä»¬ä¿©éƒ½å¯¹å…¶åŠ åˆ°11,ç„¶åå°†æ–°å€¼è®¾ç½®ä¸º11ã€‚æœ€ç»ˆçš„å€¼ä¸€å®šæ˜¯12,read-increment-setæ“ä½œå®Œæˆæ—¶,å…¶ä»–å®¢æˆ·ç«¯ä¸ä¼šåœ¨åŒä¸€æ—¶é—´æ‰§è¡Œä»»ä½•å‘½ä»¤ã€‚</p>
<blockquote>
<p><strong>incr:å°†é”®çš„æ•´æ•°å€¼é€’å¢1</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; set num 1
OK
127.0.0.1:6379&gt; incr num
(integer) 2
</code></pre>
<blockquote>
<p><strong>decr:å°†é”®çš„æ•´æ•°å€¼é€’å‡1</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; decr num
(integer) 0
127.0.0.1:6379&gt; decr num
(integer) -1 #&lt;==ä¸memcachedä¸åŒçš„æ˜¯,redisä¼šè¢«å‡å°‘ä¸ºè´Ÿæ•°
</code></pre>
<blockquote>
<p><strong>incrby:å°†é”®å¢åŠ ä¸€ä¸ªæŒ‡å®šå®šé‡</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; incrby num 10
(integer) 9
</code></pre>
<blockquote>
<p><strong>incrbyfloat: å°†é”®å¢åŠ ä¸€ä¸ªæŒ‡å®šå®šé‡çš„æµ®ç‚¹å€¼</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; incrbyfloat num 
&quot;9.1&quot; #&lt;==æ“ä½œåå€¼å˜ä¸ºæµ®ç‚¹å‹
127.0.0.1:6379&gt; incrby num 11 
(error) ERR value is not an integer or out of range #&lt;==ä¸å¯ä»¥åœ¨è¿›è¡Œæ•´å‹åŸå­é€’å¢
</code></pre>
<h3 id="ä¸ºkeyè®¾ç½®æ–°å€¼å¹¶ä¸”è¿”å›åŸå€¼">ä¸ºkeyè®¾ç½®æ–°å€¼å¹¶ä¸”è¿”å›åŸå€¼<a hidden class="anchor" aria-hidden="true" href="#ä¸ºkeyè®¾ç½®æ–°å€¼å¹¶ä¸”è¿”å›åŸå€¼">Â¶</a></h3>
<p>å¯¹å­—ç¬¦ä¸²,å¦ä¸€ä¸ªæ“ä½œæ˜¯GETSETå‘½ä»¤,è¡Œå¦‚å…¶å:ä»–ä¸ºkeyè®¾ç½®æ–°å€¼å¹¶ä¸”è¿”å›åŸå€¼ã€‚è¿™æœ‰ä»€ä¹ˆç”¨å¤„å‘¢?ä¾‹å¦‚:ä½ çš„ç³»ç»Ÿæ¯å½“æœ‰æ–°ç”¨æˆ·è®¿é—®æ—¶å°±ç”¨INCRå‘½ä»¤æ“ä½œä¸€ä¸ªRedis keyã€‚ä½ å¸Œæœ›æ¯å°æ—¶å¯¹è¿™ä¸ªä¿¡æ¯æ”¶é›†ä¸€æ¬¡ã€‚ä½ å°±å¯ä»¥GETSETè¿™ä¸ªkeyå¹¶ç»™å…¶èµ‹å€¼0å¹¶è¯»å–åŸå€¼ã€‚</p>
<blockquote>
<p><strong>getsetï¼šè®¾ç½®keyçš„å­—ç¬¦ä¸²å€¼ï¼Œå¹¶è¿”å›æ—§å€¼</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; getset k1 test:getset:demo
&quot;test&quot;
127.0.0.1:6379&gt; get k1
&quot;test:getset:demo&quot;
</code></pre>
<h3 id="setbit-getbit-bitcount-binop">setbit getbit bitcount binop<a hidden class="anchor" aria-hidden="true" href="#setbit-getbit-bitcount-binop">Â¶</a></h3>
<blockquote>
<p><strong>è¿™æ˜¯åç§»ä½ä¸Šçš„äºŒè¿›åˆ¶å€¼</strong></p>
</blockquote>
<pre><code class="language-bash">(error) ERR bit offset is not an integer or out of range
127.0.0.1:6379&gt; setbit s 4294967296 1
(error) ERR bit offset is not an integer or out of range
127.0.0.1:6379&gt; setbit s 4294967295 1 #&lt;==æœ€å¤§èŒƒå›´ä¸º232-1 512M keyçš„æœ€å¤§å€¼
(integer) 0
(1.46s)
</code></pre>
<h2 id="listç±»å‹">Listç±»å‹<a hidden class="anchor" aria-hidden="true" href="#listç±»å‹">Â¶</a></h2>
<p>è¦è¯´æ¸…æ¥šåˆ—è¡¨æ•°æ®ç±»å‹,æœ€å¥½å…ˆè®²ä¸€ç‚¹å„¿ç†è®ºèƒŒæ™¯,åœ¨ä¿¡æ¯æŠ€æœ¯ç•ŒListè¿™ä¸ªè¯å¸¸å¸¸è¢«ä½¿ç”¨ä¸å½“.ä¾‹å¦‚&quot;Python Lists&quot;å°±åä¸å‰¯å®(åä¸ºLinked Lists),<font style="background:#bafe01;" size=2>ä½†ä»–ä»¬å®é™…ä¸Šæ˜¯æ•°ç»„</font>(åŒæ ·çš„æ•°æ®ç±»å‹åœ¨Rubyä¸­å«æ•°ç»„)ã€‚</p>
<p>åˆ—è¡¨å°±æ˜¯æœ‰<font style="background:#bafe01;" size=2>åºå…ƒç´ çš„åºåˆ—</font>:10,20,1,2,3å°±æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚ä½†ç”¨æ•°ç»„å®ç°çš„Listå’Œç”¨Linked Listå®ç°çš„List,åœ¨å±æ€§æ–¹é¢å¤§ä¸ç›¸åŒã€‚</p>
<p>Redis listsåŸºäºLinked Listså®ç°ã€‚è¿™æ„å‘³ç€å³ä½¿åœ¨ä¸€ä¸ªlistä¸­æœ‰æ•°ç™¾ä¸‡ä¸ªå…ƒç´ ,åœ¨å¤´éƒ¨æˆ–å°¾éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´ çš„æ“ä½œ,å…¶æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯å¸¸æ•°çº§åˆ«çš„ã€‚ç”¨LPUSHå‘½ä»¤åœ¨åä¸ªå…ƒç´ çš„listå¤´éƒ¨æ·»åŠ æ–°å…ƒç´ ,å’Œåœ¨åƒä¸‡å…ƒç´ listå¤´éƒ¨æ·»åŠ æ–°å…ƒç´ çš„é€Ÿåº¦ç›¸åŒã€‚</p>
<p>é‚£ä¹ˆ,åæ¶ˆæ¯æ˜¯ä»€ä¹ˆ?åœ¨æ•°ç»„å®ç°çš„listä¸­åˆ©ç”¨ç´¢å¼•è®¿é—®å…ƒç´ çš„é€Ÿåº¦æå¿«,è€ŒåŒæ ·çš„æ“ä½œåœ¨linked listå®ç°çš„listä¸Šæ²¡æœ‰é‚£ä¹ˆå¿«ã€‚</p>
<p>Redis Listsç”¨linked listå®ç°çš„åŸå› æ˜¯:å¯¹äºæ•°æ®åº“ç³»ç»Ÿæ¥è¯´,è‡³å…³é‡è¦çš„ç‰¹æ€§æ˜¯:èƒ½éå¸¸å¿«çš„åœ¨å¾ˆå¤§çš„åˆ—è¡¨ä¸Šæ·»åŠ å…ƒç´ .å¦ä¸€ä¸ªé‡è¦å› ç´ æ˜¯,æ­£å¦‚ä½ å°†è¦çœ‹åˆ°çš„:Redis listsèƒ½åœ¨å¸¸æ•°æ—¶ä½•å–å¾—å¸¸æ•°é•¿åº¦ã€‚</p>
<h3 id="åˆ›å»ºlistå¹¶æ’å…¥æ•°æ®">åˆ›å»ºlistå¹¶æ’å…¥æ•°æ®<a hidden class="anchor" aria-hidden="true" href="#åˆ›å»ºlistå¹¶æ’å…¥æ•°æ®">Â¶</a></h3>
<p>LPUSHå‘½ä»¤å¯å‘listçš„å·¦è¾¹(å¤´éƒ¨)æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ ,è€ŒRPUSHå‘½ä»¤å¯å‘listçš„å³è¾¹(å°¾éƒ¨)æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ ã€‚æœ€åLRANGEå‘½ä»¤å¯ä»listä¸­å–å‡ºä¸€å®šèŒƒå›´çš„å…ƒç´ ã€‚</p>
<blockquote>
<p><strong>lpush:å‘listå¤´éƒ¨æ’å…¥æ•°æ®ï¼Œå¦‚æœlistä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»º</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; lpush list lisi #&lt;== å¤´éƒ¨æ’å…¥ä¸€ä¸ªæ•°æ®
(integer) 1
127.0.0.1:6379&gt; lpush list zhangsan
(integer) 2
</code></pre>
<blockquote>
<p><strong>llen:æŸ¥çœ‹liståˆ—è¡¨å…ƒç´ ä¸ªæ•°</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; llen list	#&lt;==è·å¾—åˆ—è¡¨å…ƒç´ ä¸ªæ•°
(integer) 2
</code></pre>
<blockquote>
<p><strong>lrange:æŸ¥çœ‹åˆ—è¡¨æ‰€æœ‰å…ƒç´ </strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; lrange list 0 3 #&lt;== æ‰“å°åˆ—è¡¨çš„1,3å…ƒç´ 
 1) &quot;zhangsan&quot;
 2) &quot;lisi&quot;
 3) &quot;test1&quot;
127.0.0.1:6379&gt; lrange list 0 -1#&lt;== æ‰“å°åˆ—è¡¨çš„æ‰€æœ‰å…ƒç´ 
</code></pre>
<hr>
<p><strong><font color="#0215cd" size=2> <font color="#f8070d" size=2>âš </font> æ³¨æ„ï¼šRANGEå¸¦æœ‰ä¸¤ä¸ªç´¢å¼•,èŒƒå›´å†…ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ ã€‚è¿™ä¸¤ä¸ªç´¢å¼•éƒ½å¯ä»¥è´Ÿæ¥å‘ŠçŸ¥redisä»å°¾éƒ¨å¼€å§‹è®¡æ•°,å› æ­¤-1è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´ ,-2è¡¨ç¤ºlistä¸­çš„å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ,ä»¥æ­¤ç±»æ¨ã€‚
</font></strong></p>
<hr>
<blockquote>
<p><strong>lindex:è¿”å›æŒ‡å®šå…ƒç´ åœ¨åˆ—è¡¨ä¸­çš„ä¸‹æ ‡</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; rpush a 1 2 3 4 5
(integer) 5
127.0.0.1:6379&gt; lindex a 1
&quot;2&quot;
127.0.0.1:6379&gt; lindex a 1
</code></pre>
<blockquote>
<p><strong>linsertåœ¨æŒ‡å®šå…ƒç´ å‰åæ’å…¥æ•°æ®</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; rpush arr 1 2 3
(integer) 3
127.0.0.1:6379&gt; linsert arr after 2 5
(integer) 4
127.0.0.1:6379&gt; lrange arr 0 -1
1) &quot;1&quot;
2) &quot;2&quot;
3) &quot;5&quot;
4) &quot;3&quot;
</code></pre>
<h3 id="liståº”ç”¨åœºæ™¯">liståº”ç”¨åœºæ™¯<a hidden class="anchor" aria-hidden="true" href="#liståº”ç”¨åœºæ™¯">Â¶</a></h3>
<p>æ­£å¦‚ä½ å¯ä»¥ä»ä¸Šé¢çš„ä¾‹å­ä¸­çŒœåˆ°çš„,listå¯è¢«ç”¨æ¥å®ç°èŠå¤©ç³»ç»Ÿã€‚è¿˜å¯ä»¥ä½œä¸ºä¸åŒè¿›ç¨‹é—´ä¼ é€’æ¶ˆæ¯çš„é˜Ÿåˆ—ã€‚å…³é”®æ˜¯,ä½ å¯ä»¥æ¯æ¬¡éƒ½ä»¥åŸå…ˆæ·»åŠ çš„é¡ºåºè®¿é—®æ•°æ®ã€‚è¿™ä¸éœ€è¦ä»»ä½•SQL ORDER BYæ“ä½œ,å°†ä¼šéå¸¸å¿«,ä¹Ÿä¼šå¾ˆå®¹æ˜“æ‰©å±•åˆ°ç™¾ä¸‡çº§åˆ«å…ƒç´ çš„è§„æ¨¡ã€‚</p>
<p>ä¾‹å¦‚åœ¨è¯„çº§ç³»ç»Ÿä¸­,æ¯”å¦‚ç¤¾ä¼šåŒ–æ–°é—»ç½‘ç«™reddit.com,ä½ å¯ä»¥æŠŠæ¯ä¸ªæ–°æäº¤çš„é“¾æ¥æ·»åŠ åˆ°ä¸€ä¸ªlist,ç”¨LRANGEå¯ç®€å•çš„å¯¹ç»“æœåˆ†é¡µã€‚</p>
<p>åœ¨åšå®¢å¼•æ“å®ç°ä¸­,ä½ å¯ä¸ºæ¯ç¯‡æ—¥å¿—è®¾ç½®ä¸€ä¸ªlist,åœ¨è¯¥listä¸­æ¨å…¥è¿›åšå®¢è¯„è®º,ç­‰ç­‰ã€‚</p>
<p>å‘Redis listå‹å…¥IDè€Œä¸æ˜¯å®é™…çš„æ•°æ®,</p>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œ,æˆ‘ä»¬å°†â€œå¯¹è±¡â€(æ­¤ä¾‹ä¸­æ˜¯ç®€å•æ¶ˆæ¯)ç›´æ¥å‹å…¥Redis list,ä½†é€šå¸¸ä¸åº”è¿™ä¹ˆåš,ç”±äºå¯¹è±¡å¯èƒ½è¢«å¤šæ¬¡å¼•4:ä¾‹å¦‚åœ¨ä¸€ä¸ªlis:ä¸­ç»´æŠ¤å…¶æ—¶é—´é¡ºåº,åœ¨ä¸€ä¸ªé›†åˆä¸­ä¿å­˜å®ƒçš„ç±»åˆ«,åªè¦æœ‰å¿…è¦,å®ƒè¿˜ä¼šå‡ºç°åœ¨å…¶ä»–listä¸­,ç­‰ç­‰ã€‚</p>
<p>è®©æˆ‘ä»¬å›åˆ°reddit.comçš„ä¾‹å­,å°†ç”¨æˆ·æäº¤çš„é“¾æ¥(æ–°é—»)æ·»åŠ åˆ°listä¸­,æœ‰æ›´å¯é çš„æ–¹æ³•å¦‚ä¸‹æ‰€ç¤º</p>
<pre><code class="language-bash">127.0.0.1:6379&gt; incr next.news.id
(integer) 1
127.0.0.1:6379&gt; set new:1:title &quot;redis is simple&quot;
OK
127.0.0.1:6379&gt; set news:1:url &quot;http://www.baidu.com&quot;
OK
127.0.0.1:6379&gt; lpush submitted.news 1
(integer) 1
</code></pre>
<p>OKæˆ‘ä»¬è‡ªå¢ä¸€ä¸ªkey,å¾ˆå®¹æ˜“å¾—åˆ°ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„è‡ªå¢ID,ç„¶åé€šè¿‡æ­¤IDåˆ›å»ºå¯¹è±¡å…¥ä¸ºå¯¹è±¡çš„æ¯ä¸ªå­—æ®µè®¾ç½®ä¸€ä¸ªkeyã€‚æœ€åå°†æ–°å¯¹è±¡çš„submitted.news listsã€‚</p>
<blockquote>
<blockquote>
<p>rpop ä»å°¾éƒ¨åˆ é™¤ä¸€ä¸ªå…ƒç´ 
rpush å‘å°¾éƒ¨æ’å…¥ä¸€ä¸ªæ•°æ®
lpop ä»å¤´éƒ¨åˆ é™¤ä¸€ä¸ªå…ƒç´ </p>
</blockquote>
</blockquote>
<h3 id="åˆ é™¤listå†…å…ƒç´ ">åˆ é™¤listå†…å…ƒç´ <a hidden class="anchor" aria-hidden="true" href="#åˆ é™¤listå†…å…ƒç´ ">Â¶</a></h3>
<blockquote>
<p><strong>lrem:åˆ é™¤countçš„ç»å¯¹å€¼ä¸ªvalueåç»“æŸ<font style="background:#bafe01;" size=2> count &gt; 0ä»å¤´å¼€å§‹åˆ ,&lt;0ä»å°¾éƒ¨å¼€å§‹åˆ </font></strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; rpush aa a a b c a a
(integer) 6
127.0.0.1:6379&gt; lrem aa 1 a
(integer) 1
127.0.0.1:6379&gt; LRANGE aa 0 -1
1) &quot;a&quot;
2) &quot;b&quot;
3) &quot;c&quot;
4) &quot;a&quot;
5) &quot;a&quot;
127.0.0.1:6379&gt; lrem aa -2 a
(integer) 2
127.0.0.1:6379&gt; LRANGE aa 0 -1
1) &quot;a&quot;
2) &quot;b&quot;
3) &quot;c&quot;
</code></pre>
<blockquote>
<p><strong>ltrim:å‰ªåˆ‡keyå¯¹åº”çš„é“¾æ¥,åˆ‡[start,stop]ä¸€æ®µ,å¹¶æŠŠè¯¥æ®µé‡æ–°èµ‹ç»™key</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; rpush a 1 2 3 4 5
(integer) 5
127.0.0.1:6379&gt; ltrim a 2 3
OK
127.0.0.1:6379&gt; lrange a 0 -1
1) &quot;3&quot;
2) &quot;4&quot;
</code></pre>
<blockquote>
<p><strong>rpoplpush:å°†arrå°¾éƒ¨çš„å…ƒç´ å¼¹å‡ºåˆ°tmpå¤´éƒ¨</strong></p>
</blockquote>
<p>ä½œç”¨ï¼šæ¥æ”¶è¿”å›å€¼,å¹¶åšä¸šåŠ¡å¤„ç†ã€‚å¦‚æœæˆåŠŸ,rpop tmpæ¸…é™¤ä»»åŠ¡ï¼›å¦‚ä¸æˆåŠŸ,ä¸‹æ¬¡ä»tmpè¡¨é‡Œå–ä»»åŠ¡</p>
<pre><code class="language-bash">127.0.0.1:6379&gt; rpoplpush arr tmp
&quot;3&quot;
127.0.0.1:6379&gt; lrange arr 0 -1
1) &quot;1&quot;
2) &quot;2&quot;
3) &quot;5&quot;
127.0.0.1:6379&gt; lrange tmp 0 -1
1) &quot;3&quot;
</code></pre>
<h2 id="seté›†åˆ">seté›†åˆ<a hidden class="anchor" aria-hidden="true" href="#seté›†åˆ">Â¶</a></h2>
<p>Redisé›†åˆæ˜¯æœªæ’åºçš„é›†åˆ,å…¶å…ƒç´ æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„å­—ç¬¦ä¸²ã€‚saddå‘½ä»¤å¯ä»¥å‘é›†åˆæ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ ã€‚å’Œsetsç›¸å…³çš„æ“ä½œä¹Ÿæœ‰è®¸å¤š,æ¯”å¦‚æ£€æµ‹æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨,ä»¥åŠå®ç°äº¤é›†,å¹¶é›†,å·®é›†ç­‰ç­‰ã€‚</p>
<h3 id="åˆ›å»ºå¹¶å‘é›†åˆæ’å…¥æ–°å…ƒç´ ">åˆ›å»ºå¹¶å‘é›†åˆæ’å…¥æ–°å…ƒç´ <a hidden class="anchor" aria-hidden="true" href="#åˆ›å»ºå¹¶å‘é›†åˆæ’å…¥æ–°å…ƒç´ ">Â¶</a></h3>
<blockquote>
<p><strong>saddï¼šå‘é›†åˆå†…æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ </strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; sadd set a b c d #&lt;==å‘é›†åˆkeyä¸­å¢åŠ å…ƒç´ 
(integer) 4 
</code></pre>
<blockquote>
<p><strong>smembersï¼šæŸ¥çœ‹é›†åˆå†…æ‰€æœ‰å…ƒç´ </strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; smembers set #&lt;==è¿”å›é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ 
1) &quot;d&quot;
2) &quot;c&quot;
3) &quot;b&quot;
4) &quot;a&quot;
</code></pre>
<h3 id="åˆ é™¤é›†åˆä¸­å…ƒç´ ">åˆ é™¤é›†åˆä¸­å…ƒç´ <a hidden class="anchor" aria-hidden="true" href="#åˆ é™¤é›†åˆä¸­å…ƒç´ ">Â¶</a></h3>
<blockquote>
<p><strong>saddï¼šä»é›†åˆå†…åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡å®šå…ƒç´ </strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; srem set a #&lt;==åˆ é™¤é›†åˆä¸­åä¸ºaçš„å…ƒç´ 
(integer) 1
127.0.0.1:6379&gt; smembers set
1) &quot;d&quot;
2) &quot;c&quot;
3) &quot;b&quot;
</code></pre>
<h3 id="æŸ¥çœ‹é›†åˆå†…å…ƒç´ ">æŸ¥çœ‹é›†åˆå†…å…ƒç´ <a hidden class="anchor" aria-hidden="true" href="#æŸ¥çœ‹é›†åˆå†…å…ƒç´ ">Â¶</a></h3>
<blockquote>
<p><strong>sismemberï¼šæ£€æŸ¥é›†åˆä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªå…ƒç´ </strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; sismember set a
(integer) 0
127.0.0.1:6379&gt; sismember set b
(integer) 1
</code></pre>
<blockquote>
<p><strong>srandmemberï¼šè¿”å›å…ƒç´ ä¸­æŒ‡å®šä¸ªæ•°çš„éšæœºå…ƒç´ </strong></p>
</blockquote>
<p>è¯­æ³• srandmember key [count]</p>
<pre><code class="language-bash">127.0.0.1:6379&gt; srandmember set  2
1) &quot;d&quot;
2) &quot;b&quot;
</code></pre>
<blockquote>
<p><strong>scardè¿”å›å…ƒç´ ä¸­çš„ä¸ªæ•°</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; scard set
(integer) 3
</code></pre>
<h3 id="ç§»åŠ¨é›†åˆå†…å…ƒç´ ">ç§»åŠ¨é›†åˆå†…å…ƒç´ <a hidden class="anchor" aria-hidden="true" href="#ç§»åŠ¨é›†åˆå†…å…ƒç´ ">Â¶</a></h3>
<blockquote>
<p><strong>smoveï¼šå°†sourceé‡Œçš„memberç§»åŠ¨åˆ°destinationé›†åˆä¸­</strong></p>
</blockquote>
<p>è¯­æ³•ï¼šSMOVE source destination member</p>
<pre><code class="language-bash">127.0.0.1:6379&gt; keys *
(empty list or set)
127.0.0.1:6379&gt; sadd set a b c d e
(integer) 5
127.0.0.1:6379&gt; smove set tmp e
(integer) 1
127.0.0.1:6379&gt; keys *
1) &quot;set&quot;
2) &quot;tmp&quot;
127.0.0.1:6379&gt; smembers tmp
1) &quot;e&quot;
127.0.0.1:6379&gt; smembers set
1) &quot;c&quot;
2) &quot;b&quot;
3) &quot;a&quot;
4) &quot;d&quot;
</code></pre>
<p>â€œbâ€æ˜¯è¿™ä¸ªé›†åˆçš„æˆå‘˜,è€Œâ€œbâ€ä¸æ˜¯ã€‚é›†åˆç‰¹åˆ«é€‚åˆè¡¨ç°å¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚ä¾‹å¦‚<font style="background:#bafe01;" size=2>ç”¨Redisé›†åˆå¯ä»¥å¾ˆå®¹æ˜“å®ç°æ ‡ç­¾åŠŸèƒ½</font>ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æ–¹æ¡ˆ:å¯¹æ¯ä¸ªæƒ³åŠ æ ‡ç­¾çš„å¯¹è±¡,ç”¨ä¸€ä¸ªæ ‡ç­¾IDé›†åˆä¸ä¹‹å…³è”,å¹¶ä¸”å¯¹æ¯ä¸ªå·²æœ‰çš„æ ‡ç­¾,ä¸€ç»„å¯¹è±¡IDä¸ä¹‹å…³è”ã€‚</p>
<p>ä¾‹å¦‚å‡è®¾æˆ‘ä»¬çš„æ–°é—»ID=1000è¢«åŠ äº†ä¸‰ä¸ªtag 1,2,5å°±å¯ä»¥è®¾ç½®ä¸‹é¢ä¸¤ä¸ªé›†åˆ</p>
<pre><code class="language-bash">127.0.0.1:6379&gt; sadd news:1000:tags 1
(integer) 1
127.0.0.1:6379&gt; sadd news:1000:tags 2
(integer) 1
127.0.0.1:6379&gt; sadd news:1000:tags 5
(integer) 1
127.0.0.1:6379&gt; smembers news:1000:tags
1) &quot;1&quot;
2) &quot;2&quot;
3) &quot;5&quot;
</code></pre>
<p>è€Œæœ‰äº›çœ‹ä¸Šå»å¹¶ä¸ç®€å•çš„æ“ä½œä»ç„¶èƒ½ä½¿ç”¨ç›¸åº”çš„rediså‘½ä»¤è½»æ¾å®ç°ã€‚ä¾‹å¦‚æˆ‘ä»¬ä¹Ÿè®¸æƒ³è·å¾—ä¸€ä»½åŒæ—¶æ‹¥æœ‰æ ‡ç­¾1,2,10å’Œ27çš„å¯¹è±¡åˆ—è¡¨ã€‚è¿™å¯ä»¥ç”¨SINTERå‘½ä»¤æ¥åš,ä»–å¯ä»¥åœ¨ä¸åŒé›†åˆä¹‹é—´å–å‡ºäº¤é›†ã€‚</p>
<p>tags:1:obj tags:2:obj tags:5:obj tags:27:obj</p>
<pre><code class="language-bash">127.0.0.1:6379&gt; smembers test1
1) &quot;1&quot;
2) &quot;2&quot;
3) &quot;3&quot;
127.0.0.1:6379&gt; smembers test4
1) &quot;1&quot;
2) &quot;2&quot;
3) &quot;9&quot;
127.0.0.1:6379&gt; sinter test1 test4
1) &quot;1&quot;
2) &quot;2&quot;
</code></pre>
<h3 id="é›†åˆè®¡ç®—">é›†åˆè®¡ç®—<a hidden class="anchor" aria-hidden="true" href="#é›†åˆè®¡ç®—">Â¶</a></h3>
<p><em><strong>åˆ›å»ºä¸€ä¸ªé›†åˆ</strong></em></p>
<pre><code class="language-bash">127.0.0.1:6379&gt; sadd A 1 2 3 4 5
(integer) 5
127.0.0.1:6379&gt; sadd B 1 3 4 5
(integer) 4
127.0.0.1:6379&gt; sadd C 1 2 6 7 8 9
(integer) 6
</code></pre>
<blockquote>
<p><strong>sinterï¼šå–å‡ºæŒ‡å®šé›†åˆå†…çš„äº¤é›†</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; sinter A B  #&lt;==å–å‡ºA Bä¸¤ä¸ªé›†åˆä¸­çš„äº¤é›†
1) &quot;1&quot; 
2) &quot;3&quot;
3) &quot;4&quot;
4) &quot;5&quot;
127.0.0.1:6379&gt; sinter A B C
1)&quot;1&quot;
</code></pre>
<blockquote>
<p><strong>sinterstoreï¼šå°†å¤šä¸ªé›†åˆçš„äº¤é›†æ”¾å…¥å¦ä¸€ä¸ªé›†åˆå†…</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; sinterstore tmp A B  #&lt;== å°†A Bé›†åˆä¸­çš„äº¤é›†æ”¾ç½®åœ¨tmpé›†åˆä¸­
2)(integer) 4
3)127.0.0.1:6379&gt; smembers tmp
4)1) &quot;1&quot;
5)2) &quot;3&quot;
6)3) &quot;4&quot;
7)4) &quot;5&quot;
</code></pre>
<blockquote>
<p><strong>sunionè·å¾—å¤šä¸ªé›†åˆçš„å¹¶é›†</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; sunion A B
1) &quot;1&quot;
2) &quot;2&quot;
3) &quot;3&quot;
4) &quot;4&quot;
5) &quot;5&quot;
</code></pre>
<blockquote>
<p><strong>sdiffè·å¾—å¤šä¸ªé›†åˆçš„å·®</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; sdiff A B
1) &quot;2&quot;
</code></pre>
<h2 id="æœ‰åºé›†åˆ">æœ‰åºé›†åˆ<a hidden class="anchor" aria-hidden="true" href="#æœ‰åºé›†åˆ">Â¶</a></h2>
<p>é›†åˆæ˜¯ä½¿ç”¨é¢‘ç‡å¾ˆé«˜çš„æ•°æ®ç±»å‹,ä½†æ˜¯â€¦å¯¹è®¸å¤šé—®é¢˜æ¥è¯´ä»–ä»¬ä¹Ÿæœ‰ç‚¹å„¿å¤ªä¸è®²é¡ºåºäº†ï¼›å› æ­¤Redis1.2å¼•å…¥äº†æœ‰åºé›†åˆã€‚ä»–å’Œé›†åˆéå¸¸ç›¸ä¼¼,ä¹Ÿæ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„å­—ç¬¦ä¸²é›†åˆ,ä½†æ˜¯è¿™æ¬¡å¸¦æœ‰å…³è”çš„score,ä»¥åŠä¸€ä¸ªç±»ä¼¼lrangeçš„æ“ä½œå¯ä»¥è¿”å›æœ‰åºå…ƒç´ ,æ­¤æ“ä½œåªèƒ½ä½œç”¨äºæœ‰åºé›†åˆ,å®ƒå°±æ˜¯,zrangeå‘½ä»¤ã€‚</p>
<p>åŸºæœ¬ä¸Šæœ‰åºé›†åˆä»æŸç§ç¨‹åº¦ä¸Šè¯´æ˜¯SQLä¸–ç•Œçš„ç´¢å¼•åœ¨Redisä¸­çš„ç­‰ä»·ç‰©ã€‚ä¾‹å¦‚åœ¨ä¸Šé¢æåˆ°çš„reddit.comä¾‹å­ä¸­,å¹¶ç¥¥æœ‰æåˆ°å¦‚ä½•æ ¹æ®ç”¨æˆ·æŠ•ç¥¨å’Œæ—¶é—´å› ç´ å°†æ–°é—»ç»„åˆç”Ÿæˆé¦–é¡µã€‚æˆ‘ä»¬å°†çœ‹åˆ°æœ‰åºé›†åˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜,ä½†æœ€å¥½å…ˆä»æ›´ç®€å•çš„äº‹æƒ…å¼€å§‹,é˜æ˜è¿™ä¸ªé«˜çº§æ•°æ®ç±»å‹æ˜¯å¦‚ä½•å·¥ä½œçš„.è®©æˆ‘ä»¬æ·»åŠ å‡ ä¸ªé»‘å®¢,å¹¶å°†ä»–ä»¬çš„ç”Ÿæ—¥ä½œä¸º&quot;score&quot;ã€‚</p>
<h3 id="æ·»åŠ å¹¶æŸ¥çœ‹æœ‰åºé›†åˆ">æ·»åŠ å¹¶æŸ¥çœ‹æœ‰åºé›†åˆ<a hidden class="anchor" aria-hidden="true" href="#æ·»åŠ å¹¶æŸ¥çœ‹æœ‰åºé›†åˆ">Â¶</a></h3>
<blockquote>
<p><strong>æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜åˆ°ä¸€ä¸ªé›†åˆ,å¦‚æœè¿™ä¸ªæˆå‘˜å­˜åœ¨,åˆ™æ›´æ–°å…¶æ’åºåˆ†æ•°</strong></p>
</blockquote>
<p>è¯­æ³•ï¼šZADD key [NX|XX] [CH] [INCR] score member [score member &hellip;]</p>
<p><em><strong>é€‰é¡¹è¯¦è§£</strong></em></p>
<table>
<thead>
<tr>
<th style="text-align:center">å‚æ•°</th>
<th style="text-align:left">è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">XX</td>
<td style="text-align:left">ä»…æ›´æ–°å·²ç»å­˜åœ¨çš„å…ƒç´ ã€‚ä¸è¦æ·»åŠ å…ƒç´ ã€‚</td>
</tr>
<tr>
<td style="text-align:center">NX</td>
<td style="text-align:left">ä¸è¦æ›´æ–°ç°æœ‰çš„å…ƒç´ ã€‚å§‹ç»ˆæ·»åŠ æ–°å…ƒç´ ã€‚</td>
</tr>
<tr>
<td style="text-align:center">CH</td>
<td style="text-align:left">ä»æ·»åŠ çš„æ–°å…ƒç´ çš„æ•°é‡ä¿®æ”¹è¿”å›å€¼,æ”¹å˜å…ƒç´ çš„æ€»æ•°ï¼ˆCHæ˜¯æ›´æ”¹çš„ç¼©å†™ï¼‰ã€‚å·²æ›´æ”¹çš„å…ƒç´ æ˜¯æ·»åŠ çš„æ–°å…ƒç´ ,å·²ç»å­˜åœ¨çš„å…ƒç´ å·²æ›´æ–°ã€‚æ‰€ä»¥åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šçš„å…·æœ‰ä¸è¿‡å»ç›¸åŒçš„åˆ†æ•°çš„å…ƒç´ ä¸è®¡ç®—åœ¨å†…ã€‚æ³¨æ„ï¼šé€šå¸¸,ZADDçš„è¿”å›å€¼ä»…è®¡ç®—æ·»åŠ çš„æ–°å…ƒç´ çš„æ•°é‡ã€‚</td>
</tr>
<tr>
<td style="text-align:center">INCR</td>
<td style="text-align:left">å½“æŒ‡å®šæ­¤é€‰é¡¹æ—¶,ZADDçš„è¡Œä¸ºå°±åƒZINCRBYã€‚åœ¨æ­¤æ¨¡å¼ä¸‹åªèƒ½æŒ‡å®šä¸€ä¸ªè®°åˆ†å…ƒç´ å¯¹ã€‚</td>
</tr>
</tbody>
</table>
<p><strong>åˆ›å»ºä¸€ä¸ªé›†åˆ</strong></p>
<pre><code class="language-bash">127.0.0.1:6379&gt; zadd hacker 1953 zhangfei 1963 zhaoyun 1989 wangping 1992 zhugeliang 1945 liubei
(integer) 5
127.0.0.1:6379&gt; zadd hacker 100 zhugeliang
(integer) 0
127.0.0.1:6379&gt; zrange hacker 0 -1
1) &quot;zhugeliang&quot;
2) &quot;liubei&quot;
3) &quot;zhangfei&quot;
4) &quot;zhaoyun&quot;
5) &quot;wangping&quot;
</code></pre>
<blockquote>
<p><strong>æŸ¥çœ‹æŸä¸ªå…ƒç´ åœ¨é›†åˆå†…çš„ä½ç½®</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; zscore code_lag py
&quot;4&quot;
</code></pre>
<p>å¯¹æœ‰åºé›†åˆé‡‡è¯´,æŒ‰ç”Ÿæ—¥æ’åºè¿”å›è¿™äº›æ•°æ®æ˜“å¦‚åæŒ,å› ä¸ºä»–ä»¬å·²ç»æ˜¯æœ‰åºçš„ã€‚æœ‰åºé›†åˆæ˜¯é€šè¿‡ä¸€ä¸ªdual-portedæ•°æ®ç»“æ„å®ç°çš„,å®ƒåŒ…å«ä¸€ä¸ªç²¾ç®€çš„æœ‰åºåˆ—è¡¨å’Œä¸€ä¸ªhash table,å› æ­¤æ·»åŠ ä¸€ä¸ªå…ƒç´ çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(log(N))ã€‚è¿™è¿˜è¡Œ,ä½†å½“æˆ‘ä»¬éœ€è¦è®¿é—®æœ‰åºçš„å…ƒç´ æ—¶,Redisä¸å¿…å†åšä»»ä½•äº‹æƒ…,å®ƒå·²ç»æ˜¯æœ‰åºçš„äº†ã€‚</p>
<h3 id="å¯¹é›†åˆçš„å€¼æ’åº">å¯¹é›†åˆçš„å€¼æ’åº<a hidden class="anchor" aria-hidden="true" href="#å¯¹é›†åˆçš„å€¼æ’åº">Â¶</a></h3>
<blockquote>
<p><strong>é€šè¿‡ç´¢å¼•æŸ¥çœ‹ä¸€ä¸ªæœ‰åºé›†åˆçš„èŒƒå›´</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; zrange hacker 0 -1 withscores  #&lt;==æ‰“å°score
 1) &quot;liubei&quot;
 2) &quot;1945&quot;
 3) &quot;zhangfei&quot;
 4) &quot;1953&quot;
 5) &quot;zhaoyun&quot;
 6) &quot;1988&quot;
 7) &quot;wangping&quot;
 8) &quot;1989&quot;
 9) &quot;zhugeliang&quot;
10) &quot;1992&quot;
</code></pre>
<blockquote>
<p><strong>é€šè¿‡æŒ‡å®šç´¢å¼•èŒƒå›´æŸ¥çœ‹æœ‰åºé›†åˆåˆ—è¡¨ï¼ˆå€’åºï¼‰</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; zrevrange hacker 0 -1 withscores
 1) &quot;zhugeliang&quot;
 2) &quot;1992&quot;
 3) &quot;wangping&quot;
 4) &quot;1989&quot;
 5) &quot;zhaoyun&quot;
 6) &quot;1988&quot;
 7) &quot;zhangfei&quot;
 8) &quot;1953&quot;
 9) &quot;liubei&quot;
10)&quot;1945&quot;
</code></pre>
<h3 id="æŸ¥çœ‹é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°">æŸ¥çœ‹é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°<a hidden class="anchor" aria-hidden="true" href="#æŸ¥çœ‹é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°">Â¶</a></h3>
<blockquote>
<p><strong>è¿”å›æœ‰åºé›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; zcard hacker   
(integer) 8
</code></pre>
<blockquote>
<p><strong>è¿”å›min,maxåŒ…æ‹¬æå€¼</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; zcount hacker 1950 2000
(integer) 7
127.0.0.1:6379&gt; zcount hacker (1950 (2000 #&lt;==ä¸åŒ…æ‹¬æå€¼çš„ç”¨æ³•
(integer) 4
</code></pre>
<h3 id="æŸ¥æ‰¾é›†åˆåŒºé—´çš„å…ƒç´ ">æŸ¥æ‰¾é›†åˆåŒºé—´çš„å…ƒç´ <a hidden class="anchor" aria-hidden="true" href="#æŸ¥æ‰¾é›†åˆåŒºé—´çš„å…ƒç´ ">Â¶</a></h3>
<p>zrangebysocreï¼šè¿”å›æœ‰åºé›†åˆkeyçš„åˆ†æ•°minä¸maxä¹‹é—´çš„æ‰€æœ‰å…ƒç´ ï¼ˆç­‰äºminæˆ–maxï¼‰ã€‚è¿™äº›å…ƒç´ è¢«è®¤ä¸ºæ˜¯ä»ä½åˆ°é«˜çš„é¡ºåºæ’åˆ—ã€‚minå’Œmaxå¯ä»¥æ˜¯-inf(æ— ç©·)å’Œ+inf(æ­£æ— ç©·)ï¼Œå¯ä»¥ä¸éœ€è¦çŸ¥é“çš„æœ‰åºé›†åˆæœ€é«˜æˆ–æœ€ä½scoreæ¥è·å¾—å…ƒç´ ã€‚</p>
<blockquote>
<p><strong>è·å–1950å¹´ä¹‹å‰ï¼ˆä¸¤ä¸ªæå€¼ä¹ŸåŒ…å«ï¼‰å‡ºç”Ÿçš„äºº</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; zrangebyscore hacker -inf 1950 withscores
1) &quot;liubei&quot;
2) &quot;1945&quot;
3) &quot;jiangwie&quot;
4) &quot;1950&quot;
</code></pre>
<blockquote>
<p><strong>è¿”å›1950,1970åŒºé—´å†…çš„å€¼</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; zrangebyscore hacker 1950 1970 withscores
1) &quot;jiangwie&quot;
2) &quot;1950&quot; 
3) &quot;zhangfei&quot;
4) &quot;1953&quot; 
</code></pre>
<blockquote>
<p><strong>ä½¿ç”¨)è¿”å› 1950,2000åŒºé—´å†…çš„å€¼</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; zrangebyscore hacker (1950 (2000 withscores
1) &quot;zhangfei&quot;
2) &quot;1953&quot;
3) &quot;zhaoyun&quot;
4) &quot;1988&quot;
5) &quot;wangping&quot;
6) &quot;1989&quot;
7) &quot;zhugeliang&quot;
8) &quot;1992&quot;
</code></pre>
<blockquote>
<p><strong>ä½¿ç”¨limitè¿”å›æŒ‡å®šåŒºé—´å†…çš„å€¼</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; zrangebyscore hacker -inf +inf withscores limit 0 3
1) &quot;liubei&quot;
2) &quot;1945&quot;
3) &quot;jiangwie&quot;
4) &quot;1950&quot;
5) &quot;zhangfei&quot;
6) &quot;1953&quot;
</code></pre>
<p>zremrangebyscoreè¿™ä¸ªåå­—è™½ç„¶ä¸ç®—å¥½,ä½†ä»–å´éå¸¸æœ‰ç”¨,è¿˜ä¼šè¿”å›å·²åˆ é™¤çš„å…ƒç´ æ•°é‡ã€‚</p>
<p>å›åˆ°Redditçš„ä¾‹å­ï¼Œç°åœ¨æˆ‘ä»¬æœ‰ä¸ªåŸºäºæœ‰åºé›†åˆçš„åƒæ ·æ–¹æ¡ˆæ¥ç”Ÿæˆé¦–é¡µã€‚ç”¨ä¸€ä¸ªæœ‰åºé›†åˆæ¥åŒ…å«æœ€è¿‘å‡ å¤©çš„æ–°é—»(ç”¨zremrangebyscoreä¸æ—¶çš„åˆ é™¤æ—§æ–°é—»).ç”¨ä¸€ä¸ªåå°ä»»åŠ¡ä»æœ‰åºé›†åˆä¸­è·å–æ‰€æœ‰å…ƒç´ ,æ ¹æ®ç”¨æˆ·æŠ•ç¥¨å’Œæ–°é—»æ—¶é—´è®¡ç®—score,ç„¶åç”¨æ–°é—»IDå’Œscoreså…³è”ç”Ÿæˆreddit.home.pageæœ‰åºé›†åˆ.è¦æ˜¾ç¤ºé¦–é¡µ,æˆ‘ä»¬åªéœ€é—ªç”µèˆ¬çš„è°ƒç”¨ZRANGEä¸æ—¶çš„ä»reddit.home.pageæœ‰åºé›†åˆä¸­åˆ é™¤è¿‡æ—§çš„æ–°é—»ä¹Ÿæ˜¯ä¸ºäº†è®©æˆ‘ä»¬çš„ç³»ç»Ÿæ€»æ˜¯å·¥ä½œåœ¨æœ‰é™çš„æ–°é—»é›†åˆä¹‹ä¸Šã€‚
æ›´æ–°æœ‰åºé›†åˆçš„scores.</p>
<p>ç»“æŸè¿™ç¯‡æŒ‡å—ä¹‹å‰è¿˜æœ‰æœ€åä¸€ä¸ªå°è´´å£«.æœ‰åºé›†åˆscoreså¯ä»¥åœ¨ä»»ä½•æ—¶å€™æ›´æ–°ã€‚åªè¦ç”¨ZADDå¯¹æœ‰åºé›†åˆå†…çš„å…ƒç´ æ“ä½œå°±ä¼šæ›´æ–°å®ƒçš„score(å’Œä½ç½®),æ—¶é—´å¤æ‚åº¦æ˜¯O(log(N)),å› æ­¤å³ä½¿å¤§é‡æ›´æ–°,æœ‰åºé›†åˆä¹Ÿæ˜¯åˆé€‚çš„ã€‚<font style="background:#bafe01;" size=2>å…¶ä¸­Næ˜¯æ’åºé›†åˆä¸­çš„å…ƒç´ æ•°ï¼ŒMæ˜¯è¿”å›å…ƒç´ çš„æ•°é‡ã€‚å¦‚æœMæ˜¯å¸¸æ•°ï¼ˆä¾‹å¦‚ï¼Œæ€»æ˜¯ç”¨LIMITæ¥è¯¢é—®å‰10ä¸ªå…ƒç´ )ï¼Œå¯ä»¥è€ƒè™‘O(log=(N))ã€‚</font></p>
<h3 id="è®¡ç®—äº¤å¹¶é›†">è®¡ç®—äº¤å¹¶é›†<a hidden class="anchor" aria-hidden="true" href="#è®¡ç®—äº¤å¹¶é›†">Â¶</a></h3>
<blockquote>
<p><strong>è®¡ç®—ç”±numkeysæŒ‡å®šä¸ªæ•°çš„keyçš„çš„äº¤é›†ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨å…¶ä¸­destination</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; zadd k1 1 a 2 b 3 c
(integer) 3  #&lt;==a b cç›¸å½“äºæ•°ç»„çš„key 1 2 3ç›¸å½“äºæ•°ç»„çš„å€¼

127.0.0.1:6379&gt; zadd k2 10 a 20 b 30 c
(integer) 3 

127.0.0.1:6379&gt; zinterstore tmp 1 k1 k2
(error) ERR syntax error #&lt;==æŒ‡å®šnumkeysçš„æ•°é‡å’Œä¼ å‚æ•°é‡ä¸ä¸€è‡´ä¼šæç¤ºè¯­æ³•é”™è¯¯
127.0.0.1:6379&gt; zinterstore tmp 2 k1 k2
(integer) 3

127.0.0.1:6379&gt; zrange tmp 0 -1 withscores
1) &quot;a&quot; #&lt;==å¯ä»¥çœ‹å‡ºé»˜è®¤çš„èšåˆæ–¹æ³•æ˜¯sum
2) &quot;11&quot;
3) &quot;b&quot;
4) &quot;22&quot;
5) &quot;c&quot;
6) &quot;33&quot;

127.0.0.1:6379&gt; zinterstore tmp 2 k1 k2 weights 2 1 aggregate sum
(integer) 3  #&lt;==æŒ‡å®šæƒé‡è®¡ç®—ä¸¤ä¸ªä¹‹é—´keyä¹‹é—´çš„äº¤é›†

127.0.0.1:6379&gt; zrange tmp 0 -1 withscores
1) &quot;a&quot; 
2) &quot;12&quot; #&lt;==k1 a=1æƒé‡ä¸º2 å°±ç­‰äº2x1+10=12 
3) &quot;b&quot;
4) &quot;24&quot;
5) &quot;c&quot;
6) &quot;36&quot;
</code></pre>
<h2 id="hash">hash<a hidden class="anchor" aria-hidden="true" href="#hash">Â¶</a></h2>
<p>hashèƒ½å¤Ÿ<font style="background:#bafe01;" size=2>å­˜å‚¨ä¸€ä¸ªkeyå¯¹å¤šä¸ªå±æ€§çš„æ•°æ®</font> å¦‚ï¼š<font color="#f8070d" size=3><code>user.username user.password</code></font></p>
<h3 id="è®¾ç½®keyä¸­çš„åŸŸä¸å€¼">è®¾ç½®keyä¸­çš„åŸŸä¸å€¼<a hidden class="anchor" aria-hidden="true" href="#è®¾ç½®keyä¸­çš„åŸŸä¸å€¼">Â¶</a></h3>
<blockquote>
<p><strong>hsetï¼šå°†keyä¸­çš„fieldåŸŸè®¾ç½®ä¸ºvalueï¼Œå¦‚æœfieldåŸŸå­˜åœ¨åˆ™è¦†ç›–åŸvalueï¼Œä¸å­˜åœ¨åˆ™æ·»åŠ </strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; hset user1 name zhangsan
(integer) 1
127.0.0.1:6379&gt; hset user1 age 12
(integer) 1
127.0.0.1:6379&gt; hset user1 gender male
(integer) 1
</code></pre>
<blockquote>
<p><strong>hmsetï¼šç»™keyè®¾ç½®å¤šä¸ªfieldåŸŸä¸å€¼</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; hmset user2 name lisi age 11 gender female
OK
</code></pre>
<h3 id="è·å¾—keyä¸­çš„åŸŸå’Œå€¼">è·å¾—keyä¸­çš„åŸŸå’Œå€¼<a hidden class="anchor" aria-hidden="true" href="#è·å¾—keyä¸­çš„åŸŸå’Œå€¼">Â¶</a></h3>
<blockquote>
<p><strong>hgetï¼šè¿”å›keyä¸­ä¸€ä¸ªåŸŸçš„å€¼</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; hget user1 name
&quot;zhangsan&quot;
</code></pre>
<blockquote>
<p><strong>hgetallï¼šè¿”å›keyä¸­æ‰€æœ‰åŸŸå’Œå€¼</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; hgetall user1
1) &quot;name&quot;
2) &quot;zhangsan&quot;
3) &quot;age&quot;
4) &quot;12&quot;
5) &quot;gender&quot;
6) &quot;male&quot;
</code></pre>
<blockquote>
<p><strong>hmgetï¼šè¿”å›keyä¸­å¤šä¸ªå€¼</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; hmget user1 name age
1) &quot;zhangsan&quot;
2) &quot;12&quot;
</code></pre>
<blockquote>
<p><strong>hkeysï¼šè¿”å›keyä¸­çš„æ‰€æœ‰åŸŸ</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; hkeys user1
1) &quot;age&quot;
2) &quot;gender&quot;
3) 
</code></pre>
<blockquote>
<p><strong>hvalsï¼šè¿”å›keyä¸­çš„æ‰€æœ‰åŸŸçš„å€¼</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; hvals user1
1) &quot;12&quot;
2) &quot;male&quot;
</code></pre>
<h3 id="åˆ é™¤key">åˆ é™¤key<a hidden class="anchor" aria-hidden="true" href="#åˆ é™¤key">Â¶</a></h3>
<blockquote>
<p><strong>hdelï¼šåˆ é™¤keyä¸­ä¸€ä¸ªæˆ–å¤šä¸ªåŸŸ</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; hdel user1 name
(integer) 1
127.0.0.1:6379&gt; hgetall user1
1) &quot;age&quot;
2) &quot;12&quot;
3) &quot;gender&quot;
4) &quot;male&quot;

</code></pre>
<h3 id="æŸ¥çœ‹åŸŸä¿¡æ¯">æŸ¥çœ‹åŸŸä¿¡æ¯<a hidden class="anchor" aria-hidden="true" href="#æŸ¥çœ‹åŸŸä¿¡æ¯">Â¶</a></h3>
<blockquote>
<p><strong>hlenï¼šè¿”å›keyä¸­åŸŸçš„ä¸ªæ•°</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; hlen user1
(integer) 2
</code></pre>
<blockquote>
<p><strong>hexistsï¼šæŸ¥çœ‹keyä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªåŸŸ</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; hexists user1 name
(integer) 0
127.0.0.1:6379&gt; hexists user1 age
(integer) 1
</code></pre>
<blockquote>
<p><strong>hstrlenï¼šè¿”å›keyä¸­åŸŸçš„å€¼çš„é•¿åº¦</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; HSTRLEN user2 gender
(integer) 6
</code></pre>
<h3 id="hashçš„åŸå­æ“ä½œ">hashçš„åŸå­æ“ä½œ<a hidden class="anchor" aria-hidden="true" href="#hashçš„åŸå­æ“ä½œ">Â¶</a></h3>
<blockquote>
<p><strong>hincrbyï¼šå¯¹åŸŸä¸­çš„å€¼å¢é•¿valueä¸ª(å•ä½æ•´å‹)</strong></p>
<blockquote>
<p>è¯­æ³•ï¼šhincrby key field increment</p>
</blockquote>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; hget user1 age
&quot;14&quot;
127.0.0.1:6379&gt; hincrby user1 age 2
(integer) 16
127.0.0.1:6379&gt; hget user1 age
&quot;16&quot;
</code></pre>
<blockquote>
<p><strong>hincrbyfloatï¼šå¯¹åŸŸä¸­çš„å€¼å¢é•¿value(å•ä½æµ®ç‚¹å‹)</strong></p>
</blockquote>
<pre><code class="language-bash">127.0.0.1:6379&gt; hincrbyfloat user1 age 0.3
&quot;16.3&quot;
127.0.0.1:6379&gt; hget user1 age
&quot;16.3&quot;
127.0.0.1:6379&gt; hincrbyfloat user1 age -2 #&lt;==å‡å°‘ç”¨è´Ÿæ•°å³å¯
&quot;14.3&quot;
</code></pre>
<p>bitMap å¯å®ç°ç”¨å¾ˆå°çš„å†…å­˜å®ç°é«˜æ•ˆçš„å­˜å‚¨ã€‚</p>
<p>HyperLogLog è¶…å°å†…å­˜å”¯ä¸€å€¼è®¡æ•°ã€‚ 12kæ¥å®ç°å”¯ä¸€å€¼å¾—è®¡æ•°</p>
<p>GEO åŸºäºåœ°ç†ä¿¡æ¯ä½ç½®å®šä½</p>


    
    


<div class="copyrightBlock" >
    <div class="articleSuffix-bg"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 147.78 155.96"> <path d="M10.5,99.81a1.9,1.9,0,0,0-.53-.09,1.66,1.66,0,0,0-1.64,1.65A1.64,1.64,0,0,0,10,103a1.57,1.57,0,0,0,.87-.25l26.76,26.82.45-1.08L11.52,101.91A1.65,1.65,0,0,0,10.5,99.81Zm-.13,2a.57.57,0,0,1-.8,0,.58.58,0,0,1-.17-.41.58.58,0,0,1,.57-.57h0a.57.57,0,0,1,.56.58A.55.55,0,0,1,10.37,101.77Z" style="fill:#c5c9e0"></path><path d="M56.15,117.58H39.06l0-.09a1.65,1.65,0,0,0-1.36-1H37.5a1.65,1.65,0,1,0,1.56,2.19H55.7L92.92,156h41.44v-1.08h-41Zm-18.25.94a.56.56,0,0,1-.79,0,.58.58,0,0,1-.17-.41.57.57,0,0,1,.56-.57h0a.58.58,0,0,1,.57.58A.54.54,0,0,1,37.9,118.52Z" style="fill:#c5c9e0"></path><path d="M23.52,50.32a1.65,1.65,0,0,0,1.55-1.11H55.28l48-48.13h31.06V0H102.85l-48,48.13H25.07a1.64,1.64,0,0,0-2.09-1,1.64,1.64,0,0,0,.54,3.2Zm0-2.21a.57.57,0,0,1,0,1.13.57.57,0,1,1,0-1.13Z" style="fill:#c5c9e0"></path><polygon points="102.86 0 102.86 0 102.86 0 102.86 0" style="fill:#c5c9e0"></polygon><path d="M107.72,12.14h26.64V11.07H107.27L57.4,61H3.09a1.66,1.66,0,0,0-1.45-.86H1.52A1.65,1.65,0,1,0,2.81,63a1.59,1.59,0,0,0,.45-.87H57.85ZM2.05,62.23a.57.57,0,0,1-.8,0,.58.58,0,0,1-.17-.41.57.57,0,0,1,.56-.57h.09a.57.57,0,0,1,.32,1Z" style="fill:#c5c9e0"></path><path d="M134.36,43.22V42.14h-22.3l-9.62,9.63a1.64,1.64,0,0,0-2.19.77,1.61,1.61,0,0,0-.17.71,1.65,1.65,0,1,0,3.29,0,1.61,1.61,0,0,0-.16-.72l9.3-9.32Zm-32.64,10.6a.57.57,0,0,1,0-1.13.57.57,0,0,1,0,1.13Z" style="fill:#c5c9e0"></path><path d="M147,52.3l-9,9H111.48a1.64,1.64,0,0,0-1.61-1.33h-.14a1.65,1.65,0,1,0,1.6,2.41h27.19l9.26-9.29L147,52.3Zm-37.15,9.85a.56.56,0,0,1-.56-.57h0a.56.56,0,0,1,.56-.56h0a.57.57,0,1,1,0,1.13Z" style="fill:#c5c9e0"></path><path d="M66.79,75.35l11,11.06h56.53V85.33H78.27l-11-11.06H49.49L37.12,86.67a1.64,1.64,0,0,0-2.09,1,1.61,1.61,0,0,0-.09.54,1.65,1.65,0,0,0,3.29,0,1.68,1.68,0,0,0-.26-.89l12-12ZM36.58,88.79a.57.57,0,1,1,.57-.56A.57.57,0,0,1,36.58,88.79Z" style="fill:#c5c9e0"></path><path d="M110.61,95.55,92.8,113.4a1.62,1.62,0,1,0,.77.76l17.49-17.53h23.31V95.55ZM92.49,115.28a.56.56,0,0,1-.8,0,.58.58,0,0,1-.17-.41.57.57,0,0,1,.57-.57h0a.58.58,0,0,1,.56.58A.55.55,0,0,1,92.49,115.28Z" style="fill:#c5c9e0"></path><path d="M97.89,122.3H76.62L64.2,109.85a1.65,1.65,0,0,0-.77-2.2,1.77,1.77,0,0,0-.72-.17h-.14a1.65,1.65,0,0,0,.15,3.29,1.58,1.58,0,0,0,.71-.17l12.74,12.77H98.34l17.48-17.52h18.54v-1.08h-19ZM63.12,109.53a.56.56,0,0,1-.8,0,.58.58,0,0,1-.17-.41.57.57,0,0,1,1.14,0A.54.54,0,0,1,63.12,109.53Z" style="fill:#c5c9e0"></path> </svg> </div>
    <p>æœ¬æ–‡å‘å¸ƒäº<a href="https://www.oomkill.com/about" target="_blank">Cylonçš„æ”¶è—å†Œ</a>ï¼Œè½¬è½½è¯·è‘—ååŸæ–‡é“¾æ¥~</p>
    <p>é“¾æ¥ï¼š<a href="https://www.oomkill.com/2016/11/redis-datatype/" target="_blank">https://www.oomkill.com/2016/11/redis-datatype/</a></p>
    <p style="margin-bottom: 0px;">ç‰ˆæƒï¼šæœ¬ä½œå“é‡‡ç”¨<a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">ã€Œç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…ã€</a> è®¸å¯åè®®è¿›è¡Œè®¸å¯ã€‚</p>
    </div>
</div>
  </div>

  <footer class="post-footer">
    
<nav class="paginav">
  <a class="prev" href="https://www.oomkill.com/2016/11/redis-persist/">
    <span class="title"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select: text;"><line x1="19" y1="12" x2="5" y2="12" style="user-select: text;"></line><polyline points="12 19 5 12 12 5" style="user-select: text;"></polyline>
      </polyline></svg>&nbsp; </span>
    
    <span>redisæ•°æ®æŒä¹…åŒ–</span>
  </a>
  <a class="next" href="https://www.oomkill.com/2016/11/redis-replication/" >
    <span class="title"> </span>
    
    <span>redisä¸»ä»å¤åˆ¶å·¥ä½œåŸç†&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select: text;"><line x1="5" y1="12" x2="19" y2="12" style="user-select: text;"></line><polyline points="12 5 19 12 12 19" style="user-select: text;"></polyline></svg></span>
  </a>
</nav>

  </footer>

  
  <div class="pagination__title">
    <span class="pagination__title-h"></span>
  </div>
  
  
  
  
    <div class="comments-separator"></div>
    

<h3 class="relatedContentTitle" >ç›¸å…³é˜…è¯»</h3>
<ul class="relatedContent">
	
	<li><a href="/2016/11/redis-install/"><span>Rediså®‰è£…</span></a></li>
	
	<li><a href="/2016/11/redis-replication/"><span>redisä¸»ä»å¤åˆ¶å·¥ä½œåŸç†</span></a></li>
	
	<li><a href="/2016/11/redis-subscribe-and-transaction/"><span>redisäº‹åŠ¡ä¸å‘å¸ƒè®¢é˜…</span></a></li>
	
	<li><a href="/2016/11/redis-security/"><span>rediså®‰å…¨ç›¸å…³é…ç½®</span></a></li>
	
	<li><a href="/2016/11/redis-persist/"><span>redisæ•°æ®æŒä¹…åŒ–</span></a></li>
	
</ul>

  

  
    
      <div class="comments-separator"></div>
<div class="comments">
    <script>
    function loadComment() {
        let theme = localStorage.getItem('pref-theme') === 'dark' ? 'dark' : 'light';
        let s = document.createElement('script');
        s.src = 'https://giscus.app/client.js';
        s.setAttribute('data-repo', 'cylonchau\/cylonchau.github.io');
        s.setAttribute('data-repo-id', 'R_kgDOIRlNSQ');
        s.setAttribute('data-category', 'Announcements');
        s.setAttribute('data-category-id', 'DIC_kwDOIRlNSc4CXy1U');
        s.setAttribute('data-mapping', 'title');
        s.setAttribute('data-reactions-enabled', '1');
        s.setAttribute('data-emit-metadata', '1');
        s.setAttribute('data-input-position', 'top');
        s.setAttribute('data-lang', 'zh-TW');
        s.setAttribute('data-theme', theme);
        s.setAttribute('crossorigin', 'anonymous');
        s.setAttribute('async', '');
        document.querySelector('div.comments').innerHTML = '';
        document.querySelector('div.comments').appendChild(s);
    }
    loadComment();
    </script>
</div>
</article>
    </main>
    
<footer class="footer">
  <p>
  Copyright
  <span>&copy; 2024 <a href="https://www.oomkill.com">Cylon&#39;s Collection</a></span></p>
  <span style="display: inline-block; margin-left: 1em;">
    Powered by
    <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> on github-page & Theme
    <a href="https://github.com/reorx/hugo-PaperModX/" rel="noopener" target="_blank">PaperModX</a>
  </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <span class="topInner">
        <svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z"/>
        </svg>
        <span id="read_progress"></span>
    </span>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '1' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>

<script>
  document.addEventListener('scroll', function (e) {
      const readProgress = document.getElementById("read_progress");
      const scrollHeight = document.documentElement.scrollHeight;
      const clientHeight = document.documentElement.clientHeight;
      const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
      readProgress.innerText = ((scrollTop / (scrollHeight - clientHeight)).toFixed(2) * 100).toFixed(0);
  })
</script>

<script>
  var menu = document.getElementById('menu')
  if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
          localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
  }

  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
          e.preventDefault();
          var id = this.getAttribute("href").substr(1);
          if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
              document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                  behavior: "smooth"
              });
          } else {
              document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
          }
          if (id === "top") {
              history.replaceState(null, null, " ");
          } else {
              history.pushState(null, null, `#${id}`);
          }
      });
  });
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
      if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
          mybutton.style.visibility = "visible";
          mybutton.style.opacity = "1";
      } else {
          mybutton.style.visibility = "hidden";
          mybutton.style.opacity = "0";
      }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>
<script>
  document.querySelectorAll('pre > code').forEach((codeblock) => {
    const container = codeblock.parentNode.parentNode;

    const copybutton = document.createElement('button');
    copybutton.classList.add('copy-code');
    copybutton.innerText = 'copy';

    function copyingDone() {
      copybutton.innerText = 'copied';
      setTimeout(() => {
        copybutton.innerText = 'copy';
      }, 2000);
    }

    copybutton.addEventListener('click', (cb) => {
      if ('clipboard' in navigator) {
        navigator.clipboard.writeText(codeblock.textContent);
        copyingDone();
        return;
      }

      const range = document.createRange();
      range.selectNodeContents(codeblock);
      const selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
      try {
        document.execCommand('copy');
        copyingDone();
      } catch (e) { };
      selection.removeRange(range);
    });

    if (container.classList.contains("highlight")) {
      container.appendChild(copybutton);
    } else if (container.parentNode.firstChild == container) {
      
    } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
      
      codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
    } else {
      
      codeblock.parentNode.appendChild(copybutton);
    }
  });
</script>




<script>
  
  
  (function() {
    const enableTocScroll = '1' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

<script src="/js/instantclick.min.js" data-no-instant
></script>
<script data-no-instant>
  
  
  
  
  
  
  InstantClick.init();
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.6.0/mermaid.min.js" crossorigin="anonymous"></script>
<script>
    mermaid.init(undefined, '.language-mermaid');
</script>
</body>

</html>
