<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>适用于windows10 Linux子系统的安装管理配置 | Cylon's Collection</title>
<meta name=keywords content="windows,wsl"><meta name=description content="什么是WSL Windows Subsystem for Linux 简称WLS，适用于Linux的Windows子系统，可以直接在Windows上运行Linux环境（包括大部分命令行工具）
Linux containers与Windows Subsystem for Linux（WSL）区别 此处以docker与wsl进行一些比较，主要为个人的理解之处。
docker与wsl同样运行在本机环境中运行，不依赖其他管理程序与虚拟化。 docker与wsl同样为应用容器。
安装WSL 在Windows10上，用于Linux的Windows子系，可运行受支持的Linux版本（例如Ubuntu，OpenSuse，Debian等），而无需设置操作系统的复杂性。虚拟机或其他计算机。
使用设置为Linux启用Windows子系统 打开设置 点击“应用”。 在“相关设置”部分下，单击“程序和功能”选项 单击左窗格中的“打开或关闭Windows功能”选项。 检查Windows Subsystem for Linux选项。 完成这些步骤后，将配置该环境以下载并运行Windows 10上的Linux版本。
使用Microsoft Store安装Linux发行版 要在Windows 10上安装Linux发行版，请使用以下步骤：
打开Microsoft Store。搜索要安装的Linux发行版。一些可用的发行版包括：
Ubuntu OpenSuse Kali Linux Debian Alpine WSL Suse Linux Enterprise 选择要在您的设备上安装的Linux发行版。 单击获取（或安装）按钮。 Microsoft Store安装Linux发行版 单击启动按钮。为Linux发行版创建一个用户名，然后按Enter键。 指定发行版的密码，然后按Enter。 重复密码，然后按Enter确认。 完成以上步骤后，即完成安装了WLS（没有图形界面），在开始菜单 运行 wls 启动。
离线安装WLS 官网指导手册内包含所支持的Linux离线安装包
这里下载的为Ubuntu 18.04，下载后，文件格式为appx格式，本次使用的操作系统为，windows1709企业版，并且卸载了所有的 UWP应用。因此只能使用命令行进行安装。
非LTSC企业版或卸载windows store的可以直接双击安装
管理员打开Powershell 运行以下命令，将路径替换为下载的离线安装包路径。本次安装的wls默认安装到C盘
powershell 1 Add-AppxPackage .\app_name.appx 查看已经安装的子系统
text 1 wslconfig /l 安装时选择其他盘安装 首先解压."><meta name=author content="cylon"><link rel=canonical href=https://www.oomkill.com/2020/11/linux-subsystem-in-win10/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://www.oomkill.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.oomkill.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.oomkill.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.oomkill.com/favicon.ico><link rel=mask-icon href=https://www.oomkill.com/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://www.oomkill.com/2020/11/linux-subsystem-in-win10/><noscript><style>#theme-toggle,#top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link crossorigin=anonymous href=/assets/css/pe.min.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/pe.min.js></script><link rel=stylesheet href=https://cdn.staticfile.net/font-awesome/6.5.1/css/all.min.css><link rel=stylesheet href=https://cdn.staticfile.net/font-awesome/6.5.1/css/v4-shims.min.css><script defer src=https://cdn.staticfile.net/jquery/3.5.1/jquery.min.js></script><link rel=stylesheet href=https://cdn.staticfile.net/fancybox/3.5.7/jquery.fancybox.min.css><script defer src=https://cdn.staticfile.net/fancybox/3.5.7/jquery.fancybox.min.js></script><script id=MathJax-script async src=https://cdn.staticfile.net/mathjax/3.2.2/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["$$","$$"]],inlineMath:[["\\$","\\$"]]}}</script><meta property="og:title" content="适用于windows10 Linux子系统的安装管理配置"><meta property="og:description" content="什么是WSL Windows Subsystem for Linux 简称WLS，适用于Linux的Windows子系统，可以直接在Windows上运行Linux环境（包括大部分命令行工具）
Linux containers与Windows Subsystem for Linux（WSL）区别 此处以docker与wsl进行一些比较，主要为个人的理解之处。
docker与wsl同样运行在本机环境中运行，不依赖其他管理程序与虚拟化。 docker与wsl同样为应用容器。
安装WSL 在Windows10上，用于Linux的Windows子系，可运行受支持的Linux版本（例如Ubuntu，OpenSuse，Debian等），而无需设置操作系统的复杂性。虚拟机或其他计算机。
使用设置为Linux启用Windows子系统 打开设置 点击“应用”。 在“相关设置”部分下，单击“程序和功能”选项 单击左窗格中的“打开或关闭Windows功能”选项。 检查Windows Subsystem for Linux选项。 完成这些步骤后，将配置该环境以下载并运行Windows 10上的Linux版本。
使用Microsoft Store安装Linux发行版 要在Windows 10上安装Linux发行版，请使用以下步骤：
打开Microsoft Store。搜索要安装的Linux发行版。一些可用的发行版包括：
Ubuntu OpenSuse Kali Linux Debian Alpine WSL Suse Linux Enterprise 选择要在您的设备上安装的Linux发行版。 单击获取（或安装）按钮。 Microsoft Store安装Linux发行版 单击启动按钮。为Linux发行版创建一个用户名，然后按Enter键。 指定发行版的密码，然后按Enter。 重复密码，然后按Enter确认。 完成以上步骤后，即完成安装了WLS（没有图形界面），在开始菜单 运行 wls 启动。
离线安装WLS 官网指导手册内包含所支持的Linux离线安装包
这里下载的为Ubuntu 18.04，下载后，文件格式为appx格式，本次使用的操作系统为，windows1709企业版，并且卸载了所有的 UWP应用。因此只能使用命令行进行安装。
非LTSC企业版或卸载windows store的可以直接双击安装
管理员打开Powershell 运行以下命令，将路径替换为下载的离线安装包路径。本次安装的wls默认安装到C盘
powershell 1 Add-AppxPackage .\app_name.appx 查看已经安装的子系统
text 1 wslconfig /l 安装时选择其他盘安装 首先解压."><meta property="og:type" content="article"><meta property="og:url" content="https://www.oomkill.com/2020/11/linux-subsystem-in-win10/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-11-08T00:00:00+00:00"><meta property="og:site_name" content="Cylon's Collection"><meta name=twitter:card content="summary"><meta name=twitter:title content="适用于windows10 Linux子系统的安装管理配置"><meta name=twitter:description content="什么是WSL Windows Subsystem for Linux 简称WLS，适用于Linux的Windows子系统，可以直接在Windows上运行Linux环境（包括大部分命令行工具）
Linux containers与Windows Subsystem for Linux（WSL）区别 此处以docker与wsl进行一些比较，主要为个人的理解之处。
docker与wsl同样运行在本机环境中运行，不依赖其他管理程序与虚拟化。 docker与wsl同样为应用容器。
安装WSL 在Windows10上，用于Linux的Windows子系，可运行受支持的Linux版本（例如Ubuntu，OpenSuse，Debian等），而无需设置操作系统的复杂性。虚拟机或其他计算机。
使用设置为Linux启用Windows子系统 打开设置 点击“应用”。 在“相关设置”部分下，单击“程序和功能”选项 单击左窗格中的“打开或关闭Windows功能”选项。 检查Windows Subsystem for Linux选项。 完成这些步骤后，将配置该环境以下载并运行Windows 10上的Linux版本。
使用Microsoft Store安装Linux发行版 要在Windows 10上安装Linux发行版，请使用以下步骤：
打开Microsoft Store。搜索要安装的Linux发行版。一些可用的发行版包括：
Ubuntu OpenSuse Kali Linux Debian Alpine WSL Suse Linux Enterprise 选择要在您的设备上安装的Linux发行版。 单击获取（或安装）按钮。 Microsoft Store安装Linux发行版 单击启动按钮。为Linux发行版创建一个用户名，然后按Enter键。 指定发行版的密码，然后按Enter。 重复密码，然后按Enter确认。 完成以上步骤后，即完成安装了WLS（没有图形界面），在开始菜单 运行 wls 启动。
离线安装WLS 官网指导手册内包含所支持的Linux离线安装包
这里下载的为Ubuntu 18.04，下载后，文件格式为appx格式，本次使用的操作系统为，windows1709企业版，并且卸载了所有的 UWP应用。因此只能使用命令行进行安装。
非LTSC企业版或卸载windows store的可以直接双击安装
管理员打开Powershell 运行以下命令，将路径替换为下载的离线安装包路径。本次安装的wls默认安装到C盘
powershell 1 Add-AppxPackage .\app_name.appx 查看已经安装的子系统
text 1 wslconfig /l 安装时选择其他盘安装 首先解压."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.oomkill.com/posts/"},{"@type":"ListItem","position":2,"name":"适用于windows10 Linux子系统的安装管理配置","item":"https://www.oomkill.com/2020/11/linux-subsystem-in-win10/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"适用于windows10 Linux子系统的安装管理配置","name":"适用于windows10 Linux子系统的安装管理配置","description":"什么是WSL Windows Subsystem for Linux 简称WLS，适用于Linux的Windows子系统，可以直接在Windows上运行Linux环境（包括大部分命令行工具）\nLinux containers与Windows Subsystem for Linux（WSL）区别 此处以docker与wsl进行一些比较，主要为个人的理解之处。\ndocker与wsl同样运行在本机环境中运行，不依赖其他管理程序与虚拟化。 docker与wsl同样为应用容器。\n安装WSL 在Windows10上，用于Linux的Windows子系，可运行受支持的Linux版本（例如Ubuntu，OpenSuse，Debian等），而无需设置操作系统的复杂性。虚拟机或其他计算机。\n使用设置为Linux启用Windows子系统 打开设置 点击“应用”。 在“相关设置”部分下，单击“程序和功能”选项 单击左窗格中的“打开或关闭Windows功能”选项。 检查Windows Subsystem for Linux选项。 完成这些步骤后，将配置该环境以下载并运行Windows 10上的Linux版本。\n使用Microsoft Store安装Linux发行版 要在Windows 10上安装Linux发行版，请使用以下步骤：\n打开Microsoft Store。搜索要安装的Linux发行版。一些可用的发行版包括：\nUbuntu OpenSuse Kali Linux Debian Alpine WSL Suse Linux Enterprise 选择要在您的设备上安装的Linux发行版。 单击获取（或安装）按钮。 Microsoft Store安装Linux发行版 单击启动按钮。为Linux发行版创建一个用户名，然后按Enter键。 指定发行版的密码，然后按Enter。 重复密码，然后按Enter确认。 完成以上步骤后，即完成安装了WLS（没有图形界面），在开始菜单 运行 wls 启动。\n离线安装WLS 官网指导手册内包含所支持的Linux离线安装包\n这里下载的为Ubuntu 18.04，下载后，文件格式为appx格式，本次使用的操作系统为，windows1709企业版，并且卸载了所有的 UWP应用。因此只能使用命令行进行安装。\n非LTSC企业版或卸载windows store的可以直接双击安装\n管理员打开Powershell 运行以下命令，将路径替换为下载的离线安装包路径。本次安装的wls默认安装到C盘\npowershell 1 Add-AppxPackage .\\app_name.appx 查看已经安装的子系统\ntext 1 wslconfig /l 安装时选择其他盘安装 首先解压.","keywords":["windows","wsl"],"articleBody":"什么是WSL Windows Subsystem for Linux 简称WLS，适用于Linux的Windows子系统，可以直接在Windows上运行Linux环境（包括大部分命令行工具）\nLinux containers与Windows Subsystem for Linux（WSL）区别 此处以docker与wsl进行一些比较，主要为个人的理解之处。\ndocker与wsl同样运行在本机环境中运行，不依赖其他管理程序与虚拟化。 docker与wsl同样为应用容器。\n安装WSL 在Windows10上，用于Linux的Windows子系，可运行受支持的Linux版本（例如Ubuntu，OpenSuse，Debian等），而无需设置操作系统的复杂性。虚拟机或其他计算机。\n使用设置为Linux启用Windows子系统 打开设置 点击“应用”。 在“相关设置”部分下，单击“程序和功能”选项 单击左窗格中的“打开或关闭Windows功能”选项。 检查Windows Subsystem for Linux选项。 完成这些步骤后，将配置该环境以下载并运行Windows 10上的Linux版本。\n使用Microsoft Store安装Linux发行版 要在Windows 10上安装Linux发行版，请使用以下步骤：\n打开Microsoft Store。搜索要安装的Linux发行版。一些可用的发行版包括：\nUbuntu OpenSuse Kali Linux Debian Alpine WSL Suse Linux Enterprise 选择要在您的设备上安装的Linux发行版。 单击获取（或安装）按钮。 Microsoft Store安装Linux发行版 单击启动按钮。为Linux发行版创建一个用户名，然后按Enter键。 指定发行版的密码，然后按Enter。 重复密码，然后按Enter确认。 完成以上步骤后，即完成安装了WLS（没有图形界面），在开始菜单 运行 wls 启动。\n离线安装WLS 官网指导手册内包含所支持的Linux离线安装包\n这里下载的为Ubuntu 18.04，下载后，文件格式为appx格式，本次使用的操作系统为，windows1709企业版，并且卸载了所有的 UWP应用。因此只能使用命令行进行安装。\n非LTSC企业版或卸载windows store的可以直接双击安装\n管理员打开Powershell 运行以下命令，将路径替换为下载的离线安装包路径。本次安装的wls默认安装到C盘\npowershell 1 Add-AppxPackage .\\app_name.appx 查看已经安装的子系统\ntext 1 wslconfig /l 安装时选择其他盘安装 首先解压.appx文件\n用 LxRunOffline 安装：\nwindows10 1803以上版本下载最新版即可，windows 1709及一下，可以安装2.x版本。\n使用以下命令安装，-f后的文件为解压后文件内根目录的install.tar.gz 语法\ntext 1 LxRunOffline.exe install -n -d -f text 1 LxRunOffline.exe install -n ubuntu -d d:\\wls -f d:\\Ubuntu_1804.2019.522.0_x64\\install.tar.gz 等运行完成后（warning可忽略），开始 =\u003e 运行wls进入，进入后默认就是root用户。另外开始菜单不会有单独的启动的图标。\n如何在重装系统后恢复原来的WSL text 1 .\\LxRunOffline.exe rg -n ubuntu -d D:\\wsl\\ubuntu 配置wsl与windows共用开发环境 本次配置的开发环境为golang与goland，在windows下与linux下的环境开发与运行为相同的环境。其他的开发环境类似。\n因为wsl共享windows的路径，可以再windows与linux安装golang编译器。并分别设置go env\nwindows text 1 2 3 4 set GO111MODULE=on set GOPATH=D:\\go_work set GOPROXY=https://goproxy.io,https://goproxy.cn,direct set GOROOT=C:\\Go Linux，GOPATH要与windows设置为同一个路径，这样可以保证安装的包为同一个。即实现了同一个开发环境与Linux环境。\ntext 1 2 3 4 5 export GO111MODULE=on export GOPROXY=https://goproxy.io,https://goproxy.cn,direct export GOROOT=/usr/local/go export GOPATH=/mnt/d/go_work/ export PATH=$PATH:$GOROOT/bin:$GOPATH/bin goland设置 file =\u003e setting =\u003e Tools =\u003e Terminal\ntext 1 C:\\Windows\\System32\\wsl.exe file =\u003e setting =\u003e Editor =\u003e Code Style\ngoland wls terminal .bashrc不生效 在wsl中发现一些环境变量、shell颜色等都不生效。这里需要了解shell的类型\nshell有两种类型，Login Shell和Non Login Shell。每一个shell都有自己自定义的脚本来预设值shell运行的环境。\nLogin Shell 当成功登陆用户后，将创建登陆shell（通过ssh sudo 或者 terminal）\n查看当前shell是什么类型的shell echo $0\nLogin Shell：-bash或-su。 Non Login Shell： bash或su Login shell 登陆后执行以下脚本：\n登陆执行/etc/profile /etc/profile执行/etc/profile.d中的所有脚本 然后执行用户 ~/.bash_profile ~/.bash_profile 会有命令执行用户目录 ~/.bashrc ~/.bashrc中会执行 /etc/bashrc\nNon Login Shell Non Login Shell是由Login Shell启动的shell。例如，登陆成功后执行bash，此时是Non Login Shell\nNon Login Shell登陆后执行以下脚本：\n首先执行 ~/.bashrc 然后 ~/.bashrc 执行 /etc/bashrc /etc/bashrc 调用 /etc/profile.d 中的脚本\n了解了执行顺序后，按照步骤查看对应问题所在，此处问题没有~/.bashrc中设置的alias和颜色。根据Login shell流程应为~/.bash_profile中去执行~/.bashrc，查看~/.bash_profile 发现文件为空。\n复制一份linux ~/.bash_profile 中的文件内容到对应的~/.bash_profile后发现功能已经正常实现。\nbash 1 2 3 4 5 6 7 8 9 10 # .bash_profile # Get the aliases and functions if [ -f ~/.bashrc ]; then . ~/.bashrc fi # User specific environment and startup programs PATH=$PATH:$HOME/bin ","wordCount":"270","inLanguage":"zh","datePublished":"2020-11-08T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"cylon"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.oomkill.com/2020/11/linux-subsystem-in-win10/"},"publisher":{"@type":"Organization","name":"Cylon's Collection","logo":{"@type":"ImageObject","url":"https://www.oomkill.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.oomkill.com/><img src=https://www.oomkill.com/favicon.ico alt aria-label=logo height=20>Cylon's Collection</a><div class=logo-switches><button id=theme-toggle><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.oomkill.com/archives><span>归档</span></a></li><li><a href=https://www.oomkill.com/tags><span>标签</span></a></li><li><a href=https://www.oomkill.com/search><span>搜索</span></a></li><li><a href=https://www.oomkill.com/about accesskey=/><span>关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">适用于windows10 Linux子系统的安装管理配置</h1><div class=post-meta><span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg><span>2020-11-08</span></span>&nbsp;·&nbsp;<span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text" style="user-select:text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z" style="user-select:text"/><polyline points="14 2 14 8 20 8" style="user-select:text"/><line x1="16" y1="13" x2="8" y2="13" style="user-select:text"/><line x1="16" y1="17" x2="8" y2="17" style="user-select:text"/><polyline points="10 9 9 9 8 9" style="user-select:text"/></svg><span>270 字</span></span>&nbsp;·&nbsp;<span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><span>2 分钟</span></span>
<span class=pe-post-meta-item>&nbsp;·&nbsp;<svg t="1714036239378" fill="currentcolor" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="6659" width="256" height="256"><path d="M690 78.2c-18.6-18.8-49-19-67.8-.4s-19 49-.4 67.8l255.4 258.6c67.8 68.6 67.8 178.8.0 247.4L653.4 878.2c-18.6 18.8-18.4 49.2.4 67.8s49.2 18.4 67.8-.4l224-226.4c104.8-106 104.8-276.4.0-382.4L690 78.2zM485.4 101.4c-24-24-56.6-37.4-90.6-37.4H96C43 64 0 107 0 160v299c0 34 13.4 66.6 37.4 90.6l336 336c50 50 131 50 181 0l267-267c50-50 50-131 0-181l-336-336zM96 160h299c8.4.0 16.6 3.4 22.6 9.4l336 336c12.4 12.4 12.4 32.8.0 45.2l-267 267c-12.4 12.4-32.8 12.4-45.2.0l-336-336c-6-6-9.4-14.2-9.4-22.6V160zm192 128a64 64 0 10-128 0 64 64 0 10128 0z" p-id="6660"/></svg></span><ul class=pe-post-meta-item><a href=https://www.oomkill.com/tags/windows/>#Windows</a>
<a href=https://www.oomkill.com/tags/wsl/>#Wsl</a></ul></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details><summary><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e4%bb%80%e4%b9%88%e6%98%afwsl aria-label=什么是WSL>什么是WSL</a><ul><li><a href=#linux-containers%e4%b8%8ewindows-subsystem-for-linuxwsl%e5%8c%ba%e5%88%ab aria-label="Linux containers与Windows Subsystem for Linux（WSL）区别">Linux containers与Windows Subsystem for Linux（WSL）区别</a></ul><li><a href=#%e5%ae%89%e8%a3%85wsl aria-label=安装WSL>安装WSL</a><ul><li><a href=#%e4%bd%bf%e7%94%a8%e8%ae%be%e7%bd%ae%e4%b8%balinux%e5%90%af%e7%94%a8windows%e5%ad%90%e7%b3%bb%e7%bb%9f aria-label=使用设置为Linux启用Windows子系统>使用设置为Linux启用Windows子系统</a><li><a href=#%e4%bd%bf%e7%94%a8microsoft-store%e5%ae%89%e8%a3%85linux%e5%8f%91%e8%a1%8c%e7%89%88 aria-label="使用Microsoft Store安装Linux发行版">使用Microsoft Store安装Linux发行版</a><li><a href=#%e7%a6%bb%e7%ba%bf%e5%ae%89%e8%a3%85wls aria-label=离线安装WLS>离线安装WLS</a><ul><li><a href=#%e5%ae%89%e8%a3%85%e6%97%b6%e9%80%89%e6%8b%a9%e5%85%b6%e4%bb%96%e7%9b%98%e5%ae%89%e8%a3%85 aria-label=安装时选择其他盘安装>安装时选择其他盘安装</a><li><a href=#%e5%a6%82%e4%bd%95%e5%9c%a8%e9%87%8d%e8%a3%85%e7%b3%bb%e7%bb%9f%e5%90%8e%e6%81%a2%e5%a4%8d%e5%8e%9f%e6%9d%a5%e7%9a%84wsl aria-label=如何在重装系统后恢复原来的WSL>如何在重装系统后恢复原来的WSL</a></ul></ul><li><a href=#%e9%85%8d%e7%bd%aewsl%e4%b8%8ewindows%e5%85%b1%e7%94%a8%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83 aria-label=配置wsl与windows共用开发环境>配置wsl与windows共用开发环境</a><ul><li><a href=#windows aria-label=windows>windows</a><li><a href=#goland%e8%ae%be%e7%bd%ae aria-label=goland设置>goland设置</a><li><a href=#goland-wls-terminal-bashrc%e4%b8%8d%e7%94%9f%e6%95%88 aria-label="goland wls terminal .bashrc不生效">goland wls terminal .bashrc不生效</a><ul><li><a href=#login-shell aria-label="Login Shell">Login Shell</a><li><a href=#non-login-shell aria-label="Non Login Shell">Non Login Shell</a></li></div></details></div></aside><script src=/js/pe-toc.min.445eb1bfc5e85dd13b9519fcc2a806522e9629b6224a2974052789ba00ab78af.js integrity="sha256-RF6xv8XoXdE7lRn8wqgGUi6WKbYiSil0BSeJugCreK8="></script><div class=post-content><h2 id=什么是wsl>什么是WSL<a hidden class=anchor aria-hidden=true href=#什么是wsl>#</a></h2><p><code>Windows Subsystem for Linux</code> 简称WLS，适用于Linux的Windows子系统，可以直接在Windows上运行Linux环境（包括大部分命令行工具）</p><h3 id=linux-containers与windows-subsystem-for-linuxwsl区别>Linux containers与Windows Subsystem for Linux（WSL）区别<a hidden class=anchor aria-hidden=true href=#linux-containers与windows-subsystem-for-linuxwsl区别>#</a></h3><p>　　此处以docker与wsl进行一些比较，主要为个人的理解之处。</p><p>　　docker与wsl同样运行在本机环境中运行，不依赖其他管理程序与虚拟化。
　　docker与wsl同样为应用容器。</p><h2 id=安装wsl>安装WSL<a hidden class=anchor aria-hidden=true href=#安装wsl>#</a></h2><p>在Windows10上，用于Linux的Windows子系，可运行受支持的Linux版本（例如Ubuntu，OpenSuse，Debian等），而无需设置操作系统的复杂性。虚拟机或其他计算机。</p><h3 id=使用设置为linux启用windows子系统>使用设置为Linux启用Windows子系统<a hidden class=anchor aria-hidden=true href=#使用设置为linux启用windows子系统>#</a></h3><ol><li><strong>打开设置</strong></li><li><strong>点击“应用”</strong>。</li><li><strong>在“相关设置”部分下，单击“程序和功能”选项</strong></li></ol><p><div class=pe-fancybox><a data-fancybox=gallery href=https://cdn.jsdelivr.net/gh/CylonChau/imgbed/img/1380340-20201108233007245-1313186627.png><img src=https://cdn.jsdelivr.net/gh/CylonChau/imgbed/img/1380340-20201108233007245-1313186627.png#center alt onerror='this.onerror=null,this.src="/placeholder.svg",this.className="pe-image-placeholder"'></a></div></p><ol start=4><li><strong>单击左窗格中的“打开或关闭Windows功能”选项。</strong></li></ol><p><div class=pe-fancybox><a data-fancybox=gallery href=https://cdn.jsdelivr.net/gh/CylonChau/imgbed/img/1380340-20201108233019164-2093713154.png><img src=https://cdn.jsdelivr.net/gh/CylonChau/imgbed/img/1380340-20201108233019164-2093713154.png#center alt onerror='this.onerror=null,this.src="/placeholder.svg",this.className="pe-image-placeholder"'></a></div></p><ol start=5><li><strong>检查Windows Subsystem for Linux选项。</strong></li></ol><p><div class=pe-fancybox><a data-fancybox=gallery href=https://cdn.jsdelivr.net/gh/CylonChau/imgbed/img/1380340-20201108233050628-1621985294.png><img src=https://cdn.jsdelivr.net/gh/CylonChau/imgbed/img/1380340-20201108233050628-1621985294.png#center alt onerror='this.onerror=null,this.src="/placeholder.svg",this.className="pe-image-placeholder"'></a></div></p><p>完成这些步骤后，将配置该环境以下载并运行Windows 10上的Linux版本。</p><h3 id=使用microsoft-store安装linux发行版>使用Microsoft Store安装Linux发行版<a hidden class=anchor aria-hidden=true href=#使用microsoft-store安装linux发行版>#</a></h3><p>要在Windows 10上安装Linux发行版，请使用以下步骤：</p><p>打开Microsoft Store。搜索要安装的Linux发行版。一些可用的发行版包括：</p><ul><li><a href="https://www.windowscentral.com/e?link=https%3A%2F%2Fclick.linksynergy.com%2Fdeeplink%3Fid%3DkXQk6%252AivFEQ%26mid%3D24542%26u1%3DUUwpUdUnU72700YYw%26murl%3Dhttps%253A%252F%252Fwww.microsoft.com%252Fen-us%252Fp%252Fubuntu%252F9nblggh4msv6%26ourl%3Dhttps%253A%252F%252Fwww.microsoft.com%252Fstore%252FproductId%252F9NBLGGH4MSV6&amp;token=ti9ZlPH4" target=_blank rel="noopener nofollow noreferrer">Ubuntu</a></li><li><a href="https://www.windowscentral.com/e?link=https%3A%2F%2Fclick.linksynergy.com%2Fdeeplink%3Fid%3DkXQk6%252AivFEQ%26mid%3D24542%26u1%3DUUwpUdUnU72700YYw%26murl%3Dhttps%253A%252F%252Fwww.microsoft.com%252Fen-us%252Fp%252Fopensuse-leap-15-1%252F9njfzk00fgkv%26ourl%3Dhttps%253A%252F%252Fwww.microsoft.com%252Fstore%252FproductId%252F9NJFZK00FGKV&amp;token=0vM0S7vS" target=_blank rel="noopener nofollow noreferrer">OpenSuse</a></li><li><a href="https://www.windowscentral.com/e?link=https%3A%2F%2Fclick.linksynergy.com%2Fdeeplink%3Fid%3DkXQk6%252AivFEQ%26mid%3D24542%26u1%3DUUwpUdUnU72700YYw%26murl%3Dhttps%253A%252F%252Fwww.microsoft.com%252Fen-us%252Fp%252Fkali-linux%252F9pkr34tncv07%26ourl%3Dhttps%253A%252F%252Fwww.microsoft.com%252Fstore%252FproductId%252F9PKR34TNCV07&amp;token=cG6n6K_6" target=_blank rel="noopener nofollow noreferrer">Kali Linux</a></li><li><a href="https://www.windowscentral.com/e?link=https%3A%2F%2Fclick.linksynergy.com%2Fdeeplink%3Fid%3DkXQk6%252AivFEQ%26mid%3D24542%26u1%3DUUwpUdUnU72700YYw%26murl%3Dhttps%253A%252F%252Fwww.microsoft.com%252Fen-us%252Fp%252Fdebian%252F9msvkqc78pk6%26ourl%3Dhttps%253A%252F%252Fwww.microsoft.com%252Fstore%252FproductId%252F9MSVKQC78PK6&amp;token=BjqzImNu" target=_blank rel="noopener nofollow noreferrer">Debian</a></li><li><a href="https://www.windowscentral.com/e?link=https%3A%2F%2Fclick.linksynergy.com%2Fdeeplink%3Fid%3DkXQk6%252AivFEQ%26mid%3D24542%26u1%3DUUwpUdUnU72700YYw%26murl%3Dhttps%253A%252F%252Fwww.microsoft.com%252Fen-us%252Fp%252Falpine-wsl%252F9p804crf0395%26ourl%3Dhttps%253A%252F%252Fwww.microsoft.com%252Fstore%252FproductId%252F9P804CRF0395&amp;token=D9eFavB7" target=_blank rel="noopener nofollow noreferrer">Alpine WSL</a></li><li><a href="https://www.windowscentral.com/e?link=https%3A%2F%2Fclick.linksynergy.com%2Fdeeplink%3Fid%3DkXQk6%252AivFEQ%26mid%3D24542%26u1%3DUUwpUdUnU72700YYw%26murl%3Dhttps%253A%252F%252Fwww.microsoft.com%252Fen-us%252Fp%252Fsuse-linux-enterprise-server-12%252F9p32mwbh6cns%26ourl%3Dhttps%253A%252F%252Fwww.microsoft.com%252Fstore%252FproductId%252F9P32MWBH6CNS&amp;token=J65kn0Rn" target=_blank rel="noopener nofollow noreferrer">Suse Linux Enterprise</a></li></ul><ol start=2><li>选择要在您的设备上安装的Linux发行版。</li><li>单击获取（或安装）按钮。</li><li>Microsoft Store安装Linux发行版</li><li>单击启动按钮。为Linux发行版创建一个用户名，然后按Enter键。</li><li>指定发行版的密码，然后按Enter。</li><li>重复密码，然后按Enter确认。</li></ol><p>完成以上步骤后，即完成安装了WLS（没有图形界面），在开始菜单 运行 <code>wls</code> 启动。</p><h3 id=离线安装wls>离线安装WLS<a hidden class=anchor aria-hidden=true href=#离线安装wls>#</a></h3><p>　　官网指导手册内包含所支持的<a href=https://docs.microsoft.com/en-us/windows/wsl/install-manual#downloading-distros target=_blank rel="noopener nofollow noreferrer">Linux离线安装包</a></p><blockquote><p>这里下载的为<code>Ubuntu 18.04</code>，下载后，文件格式为appx格式，本次使用的操作系统为，windows1709企业版，并且卸载了所有的 UWP应用。因此只能使用命令行进行安装。</p><p>非LTSC企业版或卸载windows store的可以直接双击安装</p></blockquote><p>　　管理员打开Powershell 运行以下命令，将路径替换为下载的离线安装包路径。本次安装的wls默认安装到C盘</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>powershell</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=nb>Add-AppxPackage</span> <span class=p>.\</span><span class=n>app_name</span><span class=p>.</span><span class=n>appx</span></span></span></code></pre></td></tr></table></div></div></div></div><p>查看已经安装的子系统</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>text</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>wslconfig /l</span></span></code></pre></td></tr></table></div></div></div></div><h4 id=安装时选择其他盘安装>安装时选择其他盘安装<a hidden class=anchor aria-hidden=true href=#安装时选择其他盘安装>#</a></h4><ol><li><p>首先解压.appx文件</p></li><li><p>用 <a href=https://github.com/DDoSolitary/LxRunOffline/releases target=_blank rel="noopener nofollow noreferrer">LxRunOffline</a> 安装：</p></li></ol><p>windows10 1803以上版本下载最新版即可，windows 1709及一下，可以安装<a href="https://github.com/DDoSolitary/LxRunOffline/releases?after=v2.2.2" target=_blank rel="noopener nofollow noreferrer">2.x</a>版本。</p><ol start=3><li>使用以下命令安装，<code>-f</code>后的文件为解压后文件内根目录的<code>install.tar.gz</code></li></ol><p>语法</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>text</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>LxRunOffline.exe install  -n &lt;install systemname&gt; -d &lt;save path&gt; -f &lt;unzip_path/install.tar.gz&gt;</span></span></code></pre></td></tr></table></div></div></div></div><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>text</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>LxRunOffline.exe install -n ubuntu -d d:\wls -f d:\Ubuntu_1804.2019.522.0_x64\install.tar.gz</span></span></code></pre></td></tr></table></div></div></div></div><p>等运行完成后（warning可忽略），开始 => 运行<code>wls</code>进入，进入后默认就是root用户。另外开始菜单不会有单独的启动的图标。</p><h4 id=如何在重装系统后恢复原来的wsl>如何在重装系统后恢复原来的WSL<a hidden class=anchor aria-hidden=true href=#如何在重装系统后恢复原来的wsl>#</a></h4><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>text</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>.\LxRunOffline.exe rg -n ubuntu -d D:\wsl\ubuntu</span></span></code></pre></td></tr></table></div></div></div></div><h2 id=配置wsl与windows共用开发环境>配置wsl与windows共用开发环境<a hidden class=anchor aria-hidden=true href=#配置wsl与windows共用开发环境>#</a></h2><p>　　本次配置的开发环境为golang与goland，在windows下与linux下的环境开发与运行为相同的环境。其他的开发环境类似。</p><p>　　因为wsl共享windows的路径，可以再windows与linux安装golang编译器。并分别设置<code>go env</code></p><h3 id=windows>windows<a hidden class=anchor aria-hidden=true href=#windows>#</a></h3><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>text</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>set GO111MODULE=on
</span></span><span class=line><span class=cl>set GOPATH=D:\go_work
</span></span><span class=line><span class=cl>set GOPROXY=https://goproxy.io,https://goproxy.cn,direct
</span></span><span class=line><span class=cl>set GOROOT=C:\Go</span></span></code></pre></td></tr></table></div></div></div></div><p>Linux，GOPATH要与windows设置为同一个路径，这样可以保证安装的包为同一个。即实现了同一个开发环境与Linux环境。</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>text</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>export GO111MODULE=on
</span></span><span class=line><span class=cl>export GOPROXY=https://goproxy.io,https://goproxy.cn,direct
</span></span><span class=line><span class=cl>export GOROOT=/usr/local/go
</span></span><span class=line><span class=cl>export GOPATH=/mnt/d/go_work/
</span></span><span class=line><span class=cl>export PATH=$PATH:$GOROOT/bin:$GOPATH/bin</span></span></code></pre></td></tr></table></div></div></div></div><h3 id=goland设置>goland设置<a hidden class=anchor aria-hidden=true href=#goland设置>#</a></h3><p>file => setting => Tools => Terminal</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>text</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>C:\Windows\System32\wsl.exe</span></span></code></pre></td></tr></table></div></div></div></div><p><div class=pe-fancybox><a data-fancybox=gallery href=https://cdn.jsdelivr.net/gh/CylonChau/imgbed//img/1380340-20201109000212690-34842593.png><img src=https://cdn.jsdelivr.net/gh/CylonChau/imgbed//img/1380340-20201109000212690-34842593.png#center alt onerror='this.onerror=null,this.src="/placeholder.svg",this.className="pe-image-placeholder"'></a></div></p><p>file => setting => Editor => Code Style</p><p><div class=pe-fancybox><a data-fancybox=gallery href=https://cdn.jsdelivr.net/gh/CylonChau/imgbed//img/1380340-20201109000303092-1063825125.png><img src=https://cdn.jsdelivr.net/gh/CylonChau/imgbed//img/1380340-20201109000303092-1063825125.png#center alt onerror='this.onerror=null,this.src="/placeholder.svg",this.className="pe-image-placeholder"'></a></div></p><h3 id=goland-wls-terminal-bashrc不生效>goland wls terminal .bashrc不生效<a hidden class=anchor aria-hidden=true href=#goland-wls-terminal-bashrc不生效>#</a></h3><p>　　在wsl中发现一些环境变量、shell颜色等都不生效。这里需要了解shell的类型</p><p>　　shell有两种类型，<code>Login Shell</code>和<code>Non Login Shell</code>。每一个shell都有自己自定义的脚本来预设值shell运行的环境。</p><h4 id=login-shell>Login Shell<a hidden class=anchor aria-hidden=true href=#login-shell>#</a></h4><p>　　当成功登陆用户后，将创建登陆shell（通过ssh sudo 或者 terminal）</p><p>　　查看当前shell是什么类型的shell <code>echo $0</code></p><ul><li>Login Shell：-bash或-su。</li><li>Non Login Shell： bash或su</li></ul><p><strong>Login shell 登陆后执行以下脚本</strong>：</p><blockquote><p>登陆执行<code>/etc/profile</code>
/etc/profile执行<code>/etc/profile.d</code>中的所有脚本
然后执行用户 <code>~/.bash_profile</code>
<code>~/.bash_profile</code> 会有命令执行用户目录 <code>~/.bashrc</code>
<code>~/.bashrc</code>中会执行 <code>/etc/bashrc</code></p></blockquote><h4 id=non-login-shell>Non Login Shell<a hidden class=anchor aria-hidden=true href=#non-login-shell>#</a></h4><p>　　<code>Non Login Shell</code>是由<code>Login Shell</code>启动的shell。例如，登陆成功后执行bash，此时是<code>Non Login Shell</code></p><p><strong>Non Login Shell登陆后执行以下脚本</strong>：</p><blockquote><p>首先执行 <code>~/.bashrc</code>
然后 <code>~/.bashrc</code> 执行 <code>/etc/bashrc</code>
<code>/etc/bashrc</code> 调用 <code>/etc/profile.d</code> 中的脚本</p></blockquote><p>　　了解了执行顺序后，按照步骤查看对应问题所在，此处问题没有<code>~/.bashrc</code>中设置的alias和颜色。根据<code>Login shell</code>流程应为<code>~/.bash_profile</code>中去执行<code>~/.bashrc</code>，查看<code>~/.bash_profile</code> 发现文件为空。</p><p>　　复制一份linux <code>~/.bash_profile</code> 中的文件内容到对应的<code>~/.bash_profile</code>后发现功能已经正常实现。</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># .bash_profile</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get the aliases and functions</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> -f ~/.bashrc <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>	. ~/.bashrc
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># User specific environment and startup programs</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>PATH</span><span class=o>=</span><span class=nv>$PATH</span>:<span class=nv>$HOME</span>/bin</span></span></code></pre></td></tr></table></div></div></div></div><p><div class=pe-fancybox><a data-fancybox=gallery href=https://cdn.jsdelivr.net/gh/CylonChau/imgbed//img/1380340-20201214220914329-1063628897.png><img src=https://cdn.jsdelivr.net/gh/CylonChau/imgbed//img/1380340-20201214220914329-1063628897.png#center alt onerror='this.onerror=null,this.src="/placeholder.svg",this.className="pe-image-placeholder"'></a></div></p></div><div class=pe-copyright><hr><blockquote><p>本文为原创内容，版权归作者所有。如需转载，请在文章中声明本文标题及链接。</p><p>文章标题：适用于windows10 Linux子系统的安装管理配置</p><p>文章链接：<a href=https://www.oomkill.com/2020/11/linux-subsystem-in-win10/ target=_blank>https://www.oomkill.com/2020/11/linux-subsystem-in-win10/</a></p><p>许可协议：<a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></p></blockquote></div><div class=comments-separator></div><h3 class=relatedContentTitle>相关阅读</h3><ul class=relatedContent><li><a href=/2020/10/windows10-install-docker/><span>windows下Docker Desktop安装管理</span></a></li><li><a href=/2018/04/sqlplus-windows/><span>windows上sqlplus客户端连接oralce数据库中文显示问题</span></a></li></ul><div class=comments-separator></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.oomkill.com/tags/windows/>Windows</a></li><li><a href=https://www.oomkill.com/tags/wsl/>Wsl</a></li></ul><nav class=paginav><a class=prev href=https://www.oomkill.com/2020/11/awesome-git-command/><span class=title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select:text"><line x1="19" y1="12" x2="5" y2="12" style="user-select:text"/><polyline points="12 19 5 12 12 5" style="user-select:text"/></polyline></svg>&nbsp;</span>
<span>awesome git command</span>
</a><a class=next href=https://www.oomkill.com/2020/11/hash-function/><span class=title></span>
<span>常用加密算法学习总结之散列函数(hash function)&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span></a></nav></footer><div class=pe-comments-decoration><p class=pe-comments-title></p><p class=pe-comments-subtitle></p></div><div id=pe-comments></div><script src=/js/pe-go-comment.min.86a214102576ba5f9b7bdc29eed8d58dd56e34aef80b3c65c73ea9cc88443696.js integrity="sha256-hqIUECV2ul+be9wp7tjVjdVuNK74Czxlxz6pzIhENpY="></script><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const s={src:"https://giscus.app/client.js","data-repo":"cylonchau/cylonchau.github.io","data-repo-id":"R_kgDOIRlNSQ","data-category":"Announcements","data-category-id":"DIC_kwDOIRlNSc4CXy1U","data-mapping":"pathname","data-term":"posts/Linux subsystem in Win10","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":getStoredTheme(),"data-lang":"zh-TW","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(s).forEach(([t,n])=>e.setAttribute(t,n)),document.querySelector("#pe-comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme);const n=document.querySelector("#theme-toggle-float");n&&n.addEventListener("click",setGiscusTheme)})</script></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.oomkill.com/>Cylon's Collection</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> on
<a href=https://pages.github.com/ rel=noopener target=_blank>GitHub Pages</a> & Theme
        <a href=https://github.com/tofuwine/PaperMod-PE rel=noopener target=_blank>PaperMod-PE</a></span></footer><div class=pe-right-sidebar><a href=javascript:void(0); id=theme-toggle-float class=pe-float-btn><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</a><a href=#top class=pe-float-btn id=top-link><span id=pe-read-progress></span></a></div><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>